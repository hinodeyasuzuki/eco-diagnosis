var D6;(D6=D6||{}).acadd={factorPrefTimeMonth:[[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]],[[.17,.16,.14,.12,.09,.06,.05],[.06,.05,.04,.04,.03,.02,.01],[.09,.09,.07,.06,.04,.03,.02],[.16,.15,.13,.11,.09,.06,.04]]],getArray:function(t){var e=t;return(47<e||e<0)&&(e=0),this.factorPrefTimeMonth[parseInt(e)]}},(D6=D6||{}).accons={factorPrefTimeMonth:[[[.69,.65,.6,.56,.5,.42,.38,.34,.33,.28,.23,.18],[.45,.42,.39,.36,.32,.28,.27,.65,.63,.55,.48,.39],[.53,.5,.46,.43,.38,.32,.31,.46,.44,.4,.34,.28],[.68,.63,.59,.55,.5,.41,.37,.29,.28,.24,.2,.16]],[[1.24,1.22,1.21,1.18,1.13,.94,.77,.06,.05,.03,.02,.02],[1.14,1.13,1.1,1.05,.98,.8,.67,.2,.17,.13,.1,.08],[1.2,1.19,1.16,1.13,1.06,.88,.72,.1,.08,.05,.04,.03],[1.24,1.22,1.21,1.18,1.13,.95,.79,.03,.02,.01,.01,.01]]],getArray:function(t){var e=t;return(47<e||e<0)&&(e=0),this.factorPrefTimeMonth[e]}},(D6=D6||{}).acload={factorPrefTimeMonth:[[[.66,.63,.6,.57,.52,.52,.44,.48,.48,.39,.33,.26],[.5,.47,.44,.41,.36,.31,.31,.78,.76,.69,.61,.51],[.56,.53,.5,.47,.42,.36,.34,.62,.6,.54,.47,.38],[.65,.62,.59,.56,.52,.43,.39,.41,.4,.34,.29,.22]],[[1.06,1.05,1.03,1,.95,.95,.82,.09,.09,.05,.03,.02],[.93,.92,.9,.87,.83,.7,.59,.27,.23,.18,.14,.11],[.99,.98,.96,.93,.88,.76,.64,.14,.11,.07,.05,.04],[1.05,1.04,1.02,.99,.95,.83,.7,.04,.03,.02,.01,.01]]],getArray:function(t){var e=t;return(47<e||e<0)&&(e=0),this.factorPrefTimeMonth[e]}},D6.area={prefName:["hyogo","hokkaido"],prefDefault:0,prefHeatingLevel:[4,1,2,2,3,2,2,3,3,3,3,4,4,4,4,3,3,3,4,4,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,4,4,4,4,4,5,5,6],co2ElectCompanyUnit:[.55,.55,.55,.55,.55,.55,.55,.55,.55,.55,.55],prefToEleArea:[5,0,1,1,1,1,1,1,2,2,2,2,2,2,2,1,4,4,4,2,3,3,3,3,3,5,5,5,5,5,5,6,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,9],electCompanyPrice:[1.2,1,1,1,1,1,1,1,1,1.2],elecPrice:{1:[33.32,33.32,33.32,-1500,0],2:[33.32,33.32,33.32,-1500,280],3:[38.89,27.32,13.1,2160,0],4:[17.98,16.53,16.53,0,1054],5:[20.22,18.56,18.56,64800,0],6:[22.58,17.36,13.08,0,1733]},prefTemplature:[17.4,9.4],prefPVElectricity:[4.04,3.95],energyCode2id:{electricity:0,gas:1,kerosene:2,car:3},seasonCode2id:{winter:0,spring:1,summer:2},seasonMonth:{winter:4,spring:5,summer:3},airconFactor_mon:[[.66,.62,.59,.55,.5,.41,.37,.39,.36,.31,.26,.2],[.43,.39,.37,.34,.3,.27,.26,.79,.75,.67,.59,.49],[.47,.45,.42,.39,.35,.3,.29,.57,.55,.49,.43,.35],[.62,.58,.55,.51,.47,.39,.35,.34,.32,.27,.23,.18]],heatFactor_mon:[[.64,.61,.6,.57,.53,.53,.44,.54,.54,.43,.36,.28],[.48,.45,.42,.39,.34,.3,.3,.88,.85,.78,.7,.59],[.52,.49,.47,.43,.39,.33,.32,.72,.7,.64,.56,.46],[.62,.59,.57,.54,.5,.42,.38,.48,.45,.39,.32,.25]],plusHeatFactor_mon:[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]],getElectCompany:function(t){return this.prefToEleArea[t]},getTemplature:function(t){return this.prefTemplature[t]},getPVElectricity:function(t){return this.prefPVElectricity[t]},getHeatingLevel:function(t){return this.prefHeatingLevel[t]},getCo2Unit:function(t){return this.co2ElectCompanyUnit[t]},getAverageCostEnergy:function(t,e,s){var i,o;for(var a in i=new Array,this.energyCode2id)o=this.energyCode2id[a],i[a]=this.prefKakeiEnergy[e][o]*this.kakeiNumCoefficent[(6<t?6:t)-1][o]*this.urbanCostCoefficient[o][s]/this.urbanCostCoefficient[o][0];return i},getWaterTemplature:function(){return Math.max(5,Math.min(23,.9137*this.averageTemplature+1.303))},getHeatFactor:function(t,e){var s,i=[0,0,0],o=[0,0,0],a=0;return s=t<=.7?0:t<=1.5?1:t<=2.5?2:t<=3.5?3:t<=5?4:t<=7?5:6,0<=e&&(i[0]+=this.airconFactor_mon[2][s],i[1]+=this.heatFactor_mon[2][s],i[2]+=this.plusHeatFactor_mon[2][s],a++),6<e&&(i[0]+=this.airconFactor_mon[0][s],i[1]+=this.heatFactor_mon[0][s],i[2]+=this.plusHeatFactor_mon[0][s],a++),10<e&&(i[0]+=this.airconFactor_mon[1][s],i[1]+=this.heatFactor_mon[1][s],i[2]+=this.plusHeatFactor_mon[1][s],a++),16<e&&(i[0]+=this.airconFactor_mon[3][s],i[1]+=this.heatFactor_mon[3][s],i[2]+=this.plusHeatFactor_mon[3][s],a++),o[0]=i[0]/a,o[1]=i[1]/a,o[2]=i[2]/a,o},getCoolFactor:function(t,e){var s,i=[0,0,0],o=[0,0,0],a=0;return s=t<=.7?7:t<=1.5?8:t<=2.5?9:t<=3.5?10:11,0<=e&&(i[0]+=this.airconFactor_mon[2][s],i[1]+=this.heatFactor_mon[2][s],a++),6<e&&(i[0]+=this.airconFactor_mon[1][s],i[1]+=this.heatFactor_mon[1][s],a++),12<e&&(i[0]+=this.airconFactor_mon[3][s],i[1]+=this.heatFactor_mon[3][s],a++),18<e&&(i[0]+=this.airconFactor_mon[0][s],i[1]+=this.heatFactor_mon[0][s],a++),o[0]=i[0]/a,o[1]=i[1]/a,o[2]=i[2]/a,o},prefKakeiEnergy:[[7959,5661,313,2647],[7568,5400,3772,3984]],prefSeasonFactorArray:[[[1.1084,1.3537,2.5436,.9465],[.8664,.9165,.3546,.9764],[1.0782,.6675,.0175,1.1107]],[[1.149,1.1094,1.8254,.9243],[.9482,.9876,.8169,1.0159],[.8876,.8749,.2047,1.0743]]],getSeasonFactor:function(t){return this.prefSeasonFactorArray[t]},getSeasonParam:function(t){var e=this.getSeasonFactor(t),s=Array();return s.electricity=[e[0][0],e[1][0],e[2][0]],s.gas=[e[0][1],e[1][1],e[2][1]],s.kerosene=[e[0][2],e[1][2],e[2][2]],s},kakeiNumCoefficent:[[.47,.52,.37,.45],[.86,.83,.9,.79],[.99,1,.9,.98],[1.07,1.1,.85,1.16],[1.24,1.17,1.1,1.26],[1.55,1.19,1.67,1.33]],urbanCostCoefficient:[[8762,9618],[6100,5133],[828,1898],[3415,6228]],setPersonArea:function(t,e,s){switch(this.urban=1==s||2==s?1:0,e<0&&(e=this.prefDefault),this.area=Math.round(e||0),this.electCompany=this.getElectCompany(this.area),D6.Unit.price.electricity=D6.Unit.defaultPriceElectricity*this.electCompanyPrice[this.electCompany],D6.Unit.co2.electricity=this.getCo2Unit(this.electCompany),D6.Unit.co2.nightelectricity=D6.Unit.co2.electricity,D6.Unit.co2.sellelectricity=D6.Unit.co2.electricity,this.airconFactor_mon=D6.accons.getArray(this.area),this.heatFactor_mon=D6.acload.getArray(this.area),this.plusHeatFactor_mon=D6.acadd.getArray(this.area),this.averageTemplature=this.getTemplature(this.area),this.unitPVElectricity=1e3*this.getPVElectricity(this.area)/3.6,this.heatingLevel=this.getHeatingLevel(this.area),this.heatingLevel){case 1:this.seasonMonth={winter:8,spring:3,summer:1};break;case 2:this.seasonMonth={winter:6,spring:4,summer:2};break;case 3:this.seasonMonth={winter:5,spring:5,summer:2};break;case 5:this.seasonMonth={winter:3,spring:5,summer:4};break;case 6:this.seasonMonth={winter:2,spring:5,summer:5};break;case 4:default:this.seasonMonth={winter:4,spring:5,summer:3}}for(var i in this.averageCostEnergy=this.getAverageCostEnergy(t<=0?3:t,Math.floor(this.area),this.urban),this.averageCO2Energy=[],this.averageCostEnergy)this.averageCO2Energy[i]=D6.Unit.costToCons(this.averageCostEnergy[i],i)*D6.Unit.co2[i]},getAverageCons:function(t){var e=[0,0,0],s=this.energyCode2id(t),i=this.averageCostEnergy[t],o=this.getSeasonFactor(this.area);return e.winter=this.Unit.costToCons(i*o[0][s],t),e.spring=this.Unit.costToCons(i*o[1][s],t),e.summer=this.Unit.costToCons(i*o[2][s],t),e},getAverageCostSeason:function(t,e){var s=this.energyCode2id(t);return this.averageCostEnergy[t]*this.getSeasonFactor(this.area)[this.seasonCode2id(e)][s]}},(D6=D6||{}).Unit={co2:{electricity:.55,nightelectricity:.55,sellelectricity:.55,nagas:2.23,lpgas:5.98,kerosene:2.49,gasoline:2.32,lightoil:2.62,heavyoil:3,coal:6,biomass:0,hotwater:.06,waste:0,water:0,gas:2.23,car:2.32},defaultPriceElectricity:27,price:{electricity:27,nightelectricity:10,sellelectricity:30,nagas:150,lpgas:500,kerosene:80,gasoline:130,lightoil:100,heavyoil:80,coal:0,biomass:0,hotwater:0,waste:0,water:0,gas:120,car:130},priceBase:{electricity:0,nightelectricity:2100,sellelectricity:0,nagas:1e3,lpgas:1e3,kerosene:0,gasoline:0,lightoil:0,heavyoil:0,coal:0,biomass:0,hotwater:0,waste:0,water:0,gas:800,car:0},name:{electricity:"electricity",nightelectricity:"night electricity",sellelectricity:"sell electricity",nagas:"natural gas",lpgas:"LP gas",kerosene:"kerosene",gasoline:"gas",lightoil:"light oil",heavyoil:"heavy oil",coal:0,biomass:0,hotwater:0,waste:0,water:0,gas:"natural gas",car:"gas"},unitChar:{electricity:"kWh",nightelectricity:"kWh",sellelectricity:"kWh",nagas:"m3",lpgas:"m3",kerosene:"L",gasoline:"L",lightoil:"L",heavyoil:"L",coal:0,biomass:0,hotwater:0,waste:0,water:0,gas:"m3",car:"L"},calorie:{electricity:860,nightelectricity:860,sellelectricity:860,nagas:11e3,lpgas:36e3,kerosene:8759,gasoline:8258,lightoil:9117,heavyoil:9e3,coal:0,biomass:0,hotwater:0,waste:0,water:0,gas:11e3,car:8258},jules:{electricity:9.6,nightelectricity:9.6,sellelectricity:9.6,nagas:46,lpgas:60,kerosene:38,gasoline:38,lightoil:38,heavyoil:38,coal:0,biomass:0,hotwater:0,waste:0,water:0,gas:45,car:38},costToCons:function(t,e,s,i){var o;if(void 0===i&&(i=0),-1!=t&&""!=t||(o=""),"electricity"!=e||null==typeof D6.area.elecPrice)o=t<2*D6.Unit.priceBase[e]?t/D6.Unit.price[e]/2:(t-D6.Unit.priceBase[e])/D6.Unit.price[e];else{(s<0||!s)&&(s=D6.consShow.TO.allDenka?3:1);var a=D6.area.elecPrice[s];o=(t-i*a[4]-a[3])/((a[1]+a[2])/2)}return o},consToCost:function(t,e,s,i){var o;if(-1!=t&&""!=t||(o=""),"electricity"!=e||null==typeof D6.area.elecPrice)o=t*D6.Unit.price[e];else{(s<0||!s)&&(s=D6.consShow.TO.allDenka?3:1);var a=D6.area.elecPrice[s];(o=i*a[4]+t*(a[1]+a[2])/2)>2*a[3]?o-=a[3]:o/=2}return o},consToEnergy:function(t,e){return-1!=t&&""!=t||"",t*D6.Unit.jules[e]/1e6}},(D6=D6||{}).object=function(t){var e=D6.object.func;e.prototype=t;for(var s=new e,i=arguments.length,o=1;o<i;++o)for(var a in arguments[o])s[a]=arguments[o][a];return s},D6.object.func=function(){},D6.patch=function(t,e){for(var s in e)t[s]=e[s];return t},(D6=D6||{}).Energy={electricity:0,nightelectricity:0,sellelectricity:0,nagas:0,lpgas:0,kerosene:0,gasoline:0,lightoil:0,heavyoil:0,coal:0,biomass:0,hotwater:0,waste:0,water:0,gas:0,car:0,co2:0,jules:0,cost:0,clear:function(){for(var t in D6.Unit.co2)this[t]=0;this.co2=0,this.jules=0,void(this.cost=0)!==typeof this.subID&&0!=this.subID&&(1==D6.viewparam.countfix_pre_after?this.mesTitlePrefix=this.countCall+this.subID:this.mesTitlePrefix=this.subID+this.countCall)},calcCO2:function(){for(var t in this.co2=0,D6.Unit.co2)this.co2+=this[t]*D6.Unit.co2[t]},calcJules:function(){for(var t in this.jules=0,D6.Unit.co2)this.jules+=this[t]*D6.Unit.jules[t]},calcCost:function(){for(var t in this.cost=0,D6.Unit.co2)this.cost+=this[t]*D6.Unit.price[t]},multiply:function(t){for(var e in D6.Unit.co2)this[e]*=t;this.co2*=t,this.jules*=t,this.cost*=t},multiplyArray:function(t){for(var e in D6.Unit.co2)this[e]*=t[e];this.calcCO2(),this.calcJules(),this.calcCost()},copy:function(t){for(var e in D6.Unit.co2)this[e]=t[e];this.co2=t.co2,this.jules=t.jules,this.cost=t.cost,this.endEnergy=t.endEnergy},sub:function(t){for(var e in D6.Unit.co2)this[e]-=t[e];this.co2-=t.co2,this.jules-=t.jules,this.cost-=t.cost,this.endEnergy-=t.endEnergy},add:function(t){for(var e in D6.Unit.co2)this[e]+=t[e];this.co2+=t.co2,this.jules+=t.jules,this.cost+=t.cost,this.endEnergy+=t.endEnergy},isSame:function(t){var e=!0;for(var s in D6.Unit.co2)if(this[s]!=t[s]){e=!1;break}return e}},(D6=D6||{}).ConsBase=D6.object(D6.Energy),D6.ConsBase.init=function(){this.measures=[],this.title="",this.consName="consXX",this.consCode="",this.subID=0,this.groupID=0,this.inputGuide="",this.consShow=[],this.sumCons="",this.sumCons2="",this.sumConsName="",this.sumCons2Name="",this.partCons=[],this.partCons2=[],this.partConsName="",this.partCons2Name="",this.residueCalc="yes",this.performance="",this.mainSource="",this.co2Original="",this.costOriginal="",this.julesOriginal="",this.color="",this.total=!1,this.orgCopyNum=0,this.addable="",this.precalc=function(){this.clear()},this.calc=function(){this.clear()},this.calc2nd=function(){},this.calcAdjust=function(t){this.multiplyArray(t),this.calcAdjustStrategy(t)},this.calcAdjustStrategy=function(t){},this.consSumMonth=function(t,e){for(var s in Unit.co2)this[s]+=t[s]*e;this.co2+=t.co2*e,this.cost+=t.cost*e},this.calcMeasure=function(){},this.calcMeasureInit=function(){for(var t in this.measures)this.measures[t].setzero()},this.addReductionMargin=function(t,e,s){var i,o,a;if(this.add(t),this.calcCO2(),this.calcCost(),this.calcJules(),""==s&&(s=e),this.sumConsName!=s&&this.sumConsName!=e&&(i=this.sumCons)&&(i[this.subID]?i[this.subID].addReductionMargin(t,e,this.consName):i.addReductionMargin(t,e,this.consName)),""!=this.sumCons2Name&&this.sumCons2Name!=s&&this.sumCons2Name!=e&&(i=this.sumCons2)&&(i[this.subID]?i[this.subID].addReductionMargin(t,e,this.consName):i.addReductionMargin(t,e,this.consName)),"TO"!=this.consCode){for(o in a=!1,this.partCons)this.partCons[o].consName!=s&&this.partCons[o].consName!=e||(a=!0);for(o in!a&&0<this.partCons.length&&this.addReductionMargin2Part(this.partCons,t,e,this.consName),a=!1,this.partCons2)this.partCons2[o].consName!=s&&this.partCons2[o].consName!=e||(a=!0);!a&&0<this.partCons2.length&&this.addReductionMargin2Part(this.partCons2,t,e,this.consName)}},this.addReductionMargin2Part=function(t,e,s,i){var o,a=D6.object(D6.Energy);if(1<t.length){var n=0;for(o in t)isNaN(t[o].co2)||(n+=t[o].co2);if(1<=t[0].orgCopyNum&&t[0].subID!=t[1].subID)for(o in t)0<t[o].co2&&(a.copy(e),a.multiply(t[o].co2/n),t[o].addReductionMargin(a,s,this.consName));else for(o in t)if(0<t[o].co2)if(t[o].consAddSet)for(var c in this.measures){var r=this.measures[c];r.selected&&r[t[o].consName]&&(a.copy(r[t[o].consName]),a.sub(t[o]),t[o].addReductionMargin(a,s,this.consName))}else a.copy(e),a.multiply(t[o].co2/n),t[o].addReductionMargin(a,s,this.consName)}},this.input=function(t,e){var s;if(D6.averageMode&&-1==D6.scenario.defCalcAverage.indexOf(t))return e;var i=D6.doc.data[t];return void 0===i||-1==i||""===i?s=e:(s=i,"Number"==D6.scenario.defInput[t.substr(0,4)].varType&&(s=parseFloat(s))),s},this.input2seasons=function(t,e,s){var i=[],o=this.input(t,-1),a=this.input(e,o);return-1==o&&(o=-1==a?a=s:a),i[0]=o,i[1]=a,i},this.getEquipParameters=function(t,e,s,i){var o={},a=s[0];for(var n in s)if(!(e>1.001*s[n])){a=s[n];break}var c=i[a],r=-9999,h=99999;for(var u in c)t<=u?u<h&&(h=u):r<u&&(r=u);for(var l in c[r])o[l]=((h-t)*c[r][l]+(t-r)*c[h][l])/(h-r);return o},this.setsubID=function(t){this.subID=t,this.titleList&&(this.title=this.titleList[t])},this.isSelected=function(t){return!!this.measures[t]&&this.measures[t].selected},this.getIndex=function(t,e){for(var s=0;s<e.length;s++)if(t<e[s])return s;return e.length}},D6.ConsBase.init(),(D6=D6||{}).MeasureBase=D6.object(D6.Energy),D6.MeasureBase.init=function(){this.mesID=0,this.mesdefID=0,this.subID=0,this.groupID=0,this.measureName="",this.cons="",this.selected=!1,this.available=!1,this.reduceRate=0,this.title="",this.titleShort="",this.priceNew=0,this.priceOrg=0,this.lifeTime=0,this.lifestyle=2,this.def="",this.costUnique,this.co2Change=0,this.co2ChangeW1=0,this.co2ChangeW2=0,this.costOtherChange=0,this.costChange=0,this.costTotalChange=0,this.payBackYear=0,this.co2ChangeOriginal=0,this.costOriginal=0,this.costChangeOriginal=0,this.costTotalChangeOriginal=0,this.co2ChangeSumup=0,this.costSumup=0,this.costChangeSumup=0,this.costTotalChangeSumup=0,this.advice="",this.joyfull="",this.figNum=0,this.hojoGov=0,this.genzeiGov=0,this.hojoInfo=""},D6.MeasureBase.init(),D6.MeasureBase.Constructor=function(t,e,s){this.def=e,this.measureName=e.name,this.cons=t,this.mesID=s,this.mesdefID=e.mid,this.title=e.title,this.titleShort=e.titleShort,this.lifeTime=e.lifeTime,this.priceOrg=e.price,this.groupID=this.cons.groupID,this.lifestyle=e.lifestyle,this.advice=e.advice,this.joyfull=e.joyfull,this.figNum=e.figNum},D6.MeasureBase.clearMeasure=function(){this.priceNew=0,this.lifeTime=0,this.co2Change=0,this.co2ChangeW1=0,this.co2ChangeW2=0,this.costChange=0,this.payBackYear=0,this.costOtherChange=0,this.costTotalChange=0,this.co2ChangeSumup=0,this.costChangeSumup=0,this.costTotalChangeSumup=0,this.available=!1,this.costUnique=0,this.priceOrg=0,this.clear()},D6.MeasureBase.calcSave=function(){this.calcCO2(),this.co2Change=this.co2-this.cons.co2,this.co2ChangeW1=this.co2Change*this.def.easyness*(1==this.def.lifestyle?2:1),this.co2ChangeW2=this.co2Change*this.def.easyness*this.def.easyness*(1==this.def.lifestyle?3:1),0==this.costUnique||isNaN(this.costUnique)?this.calcCost():this.cost=this.costUnique,this.costChange=0==this.cost?0:this.cost-this.cons.cost,this.def.easyness<0&&(this.co2Change=0,this.costChange=0),0==this.priceNew&&(this.priceNew=this.priceOrg),0<=this.priceNew&&0<this.lifeTime?(this.costTotalChange=this.costChange+this.priceNew/this.lifeTime/12,0<this.costChange?this.payBackYear=999:this.payBackYear=Math.min(Math.round(-this.priceNew/this.costChange/12),999)):this.costTotalChange=this.costChange,D6.isOriginal&&(this.co2ChangeOriginal=this.co2Change,this.costChangeOriginal=this.costChange,this.costTotalChangeOriginal=this.costTotalChange,this.co2ChangeW1Original=this.co2ChangeW1,this.co2ChangeW2Original=this.co2ChangeW2)},D6.MeasureBase.setzero=function(){this.copy(this.cons)},D6.MeasureBase.calcReduceRate=function(t){this.copy(this.cons),this.multiply(1-t)},D6.MeasureBase.calcReduceRateOne=function(t,e){this[t]=this.cons[t],this.multiply(1-e)},D6.MeasureBase.calcReduceRateWithParts=function(t,e){for(var s in this.calcReduceRate(t),e)this[e[s].consName]=D6.object(D6.Energy),this[e[s].consName].copy(e[s]),this[e[s].consName].multiply(1-t)},D6.MeasureBase.addReduction=function(){var t=D6.object(D6.Energy);t.copy(this),t.sub(this.cons),this.cons.addReductionMargin(t,this.cons.consName)},D6.MeasureBase.calc=function(){this.clearMeasure(),this.calcMeasure(this.measureName),this.calcSave()},D6.MeasureBase.measureSumMonth=function(t,e){for(var s in Unit.co2)this[s]+=t[s]*e;this.co2+=t.co2*e,this.co2Change+=t.co2Change*e,this.co2ChangeOriginal+=t.co2ChangeOriginal*e,this.cost+=t.cost*e,this.costChange+=t.costChange*e,this.costTotalChange+=t.costTotalChange*e,this.costOriginal+=t.costOriginal*e,this.costChangeOriginal+=t.costChangeOriginal*e,this.costTotalChangeOriginal+=t.costTotalChangeOriginal*e},(D6=D6||{}).doc={data:[],equip:[],clear:function(t){var e;e=this.data.AreaOrg,this.data=new Array,this.data.AreaOrg=e,this.data.Area=e},serialize:function(){var t="",e="",s="",i=0,o=0,a=this.data;for(i in a)if(D6.scenario.defInput[i.substr(0,4)].defaultValue!=a[i]){if(e=""+a[i],"string"==typeof a[i]){for(;-1!=e.indexOf(" ");)o=e.indexOf(" "),e=e.substring(0,o-1)+"_"+e.substring(o+1,2e3);for(;-1!=e.indexOf(",");)o=e.indexOf(","),e=e.substring(0,o-1)+"~"+e.substring(o+1,2e3)}t=t+i+"="+e+","}for(i in D6.logicList)1<=D6.logicList[i].orgCopyNum&&(t+=i+"="+D6.logicList[i].orgCopyNum+",");var n="";for(o=0;o<D6.measureList.length;o++)D6.measureList[o].selected&&(e="000"+D6.measureList[o].mesdefID,s="00"+D6.measureList[o].subID,n+=e.substr(-3)+s.substr(-2),n+=("00000000"+D6.measureList[o].priceNew).substr(-8),0<D6.measureList[o].costChangeOriginal?n+="9":n+="8",n+=(e="0000000"+Math.abs(Math.round(D6.measureList[o].costChangeOriginal))).substr(-7),0<D6.measureList[o].co2ChangeOriginal?n+="9":n+="8",n+=(e="00000"+Math.abs(Math.round(D6.measureList[o].co2ChangeOriginal))).substr(-5));return t+="mesSelId="+n},loadDataSet:function(t,e){var s,i,o,a,n,c,r,h,u=this.data,l=D6.scenario.defInput,p=0,m=0;for(s=t.split(","),c=0;c<s.length;c++)if(s[c]?(n=(a=(i=s[c].split("="))[0]).substr(0,4),o=i[1]):a="dummy",D6.logicList[a])parseInt(o)&&parseInt(o)<100&&(e||(D6.logicList[a].orgCopyNum=parseInt(o)));else if(l[n])switch(l[n].varType){case"Number":u[a]=parseFloat(o);break;case"String":for(r=o.indexOf("_");-1!=r;)r=(o=o.substring(0,r)+" "+o.substring(r+1,200)).indexOf("_");for(r=o.indexOf("~");-1!=r;)r=(o=o.substring(0,r)+","+o.substring(r+1,200)).indexOf("~");for(r=o.indexOf('"');-1!=r;)r=(o=o.substring(0,r)+o.substring(r+1,200)).indexOf('"');u[a]=o;break;default:if("mesSelId"==a)for(h=o,r=0;r<h.length;r+=27){p=parseInt(h.substr(r,3)),m=parseInt(h.substr(r+3,2));for(var D=0;D<D6.measureList.length;D++)if(D6.measureList[D].mesID==p&&D6.measureList[D].subID==m){D6.measureList[D].seleted=!0;break}}else"true"==o?u[a]=!0:"false"==o&&(u[a]=!1)}return h}},(D6=D6||{}).consList=[],D6.consListByName=[],D6.consShow=[],D6.measureList=[],D6.monthly=[],D6.resMeasure=[],D6.mesCount=0,D6.consCount=0,D6.average={consList:""},D6.isOriginal=!0,D6.sortTarget="co2ChangeOriginal",D6.viewparam={},D6.debugMode=!1,D6.constructor=function(t,e,s){D6.setscenario(t,e,s)},D6.calculateAll=function(){D6.calcCons(),D6.calcAverage(),D6.calcMeasures(-1)},"undefined"==typeof atob&&(atob=function(t){return t},btoa=function(t){return t}),(D6=D6||{}).calcMonthly=function(t,e,s,i,o){var a,n=[0,0,0,1,1,1,2,2,2,1,1,0],c=[0,0,0],r=[0,0,0],h=[0,0,0],u=[0,0,0],l=!0,p=0,m=0;for(a=0;a<12;a++)-1!=s[a]&&(c[n[a]]+=s[a],h[n[a]]++,p+=s[a],m++,l=!1);0<h[0]&&0<h[1]&&0<h[2]?(r[0]=c[0]/h[0],r[1]=c[1]/h[1],r[2]=c[2]/h[2]):-1!=e[0]&&-1!=e[1]&&-1!=e[2]?(r[0]=e[0],r[1]=e[1],r[2]=e[2]):r=i||[1,1,1];var D,f,g,d=4*r[0]+5*r[1]+3*r[2];if(0!=d&&(r[0]*=12/d,r[1]*=12/d,r[2]*=12/d),-1==e[0]&&-1==e[1]&&-1==e[2])6<m&&(t=D6.Unit.consToCost(p/m,o)),e[0]=t*r[0],e[1]=t*r[1],e[2]=t*r[2];else{l=!1;var C=0,y=0;for(a=0;a<3;a++)0!=r[a]?-1!=e[a]?(C+=e[a]/r[a],y++):1<=h[a]&&(e[a]=D6.Unit.consToCost(c[a]/h[a],o),C+=e[a]/r[a],y++):y++;t=C/=y,e[0]=-1==e[0]?t*r[0]:e[0],e[1]=-1==e[1]?t*r[1]:e[1],e[2]=-1==e[2]?t*r[2]:e[2]}for(u[0]=D6.Unit.costToCons(e[0],o),u[1]=D6.Unit.costToCons(e[1],o),u[2]=D6.Unit.costToCons(e[2],o),a=0;a<12;a++)-1==s[a]&&(D=n[(a+12-1)%12],f=n[a],g=n[(a+1)%12],s[a]=(e[D]+e[f]+e[g])/3);var T=[];return T.ave=t,T.season=e,T.seasonCons=u,T.monthly=s,T.noConsData=l,T},(D6=D6||{}).getAllResult=function(t){var e={};t?(D6.logicList[t]||(t="consTotal"),this.nowConsPageName=t):t="consTotal";var s=D6.consListByName[t][0].consCode;return e.common=D6.getCommonParameters(),e.monthly=this.getMonthly(),e.average=this.getAverage(s),e.average_graph=this.getAverage_graph(),e.itemize=this.getItemize(s),e.itemize_graph=this.getItemizeGraph(s),e.measure=this.getMeasure(t),e},D6.getAverage=function(t){var e={};return e.you=12*D6.consShow[t].co2Original,e.after=12*D6.consShow[t].co2,e.av=12*D6.average.consList[t].co2,e.youc=12*D6.consShow[t].costOriginal,e.afterc=12*D6.consShow[t].cost,e.avc=12*D6.average.consList[t].cost,e.rank100=D6.rankIn100(e.you/e.av),e.afterrank100=D6.rankIn100(e.after/e.av),e.samehome=D6.scenario.defSelectValue.sel021[Math.max(1,D6.doc.data.i021)],e.sameoffice=D6.scenario.defSelectValue.sel001[Math.max(1,D6.doc.data.i001)],e.consCode=t,e},D6.getAverage_graph=function(){var t={cost:[],co2:[]};return t.cost[1]=D6.area.averageCostEnergy,t.co2[1]=D6.area.averageCO2Energy,t.co2[1].total=t.co2[1].electricity+t.co2[1].gas+t.co2[1].kerosene+t.co2[1].car,t.cost[0]={},t.cost[0].electricity=D6.consTotal.priceEle,t.cost[0].gas=D6.consTotal.priceGas,t.cost[0].kerosene=D6.consTotal.priceKeros,t.cost[0].car=D6.consTotal.car*D6.Unit.price.gasoline,t.co2[0]={},t.co2[0].electricity=D6.consTotal.electricity*D6.Unit.co2.electricity,t.co2[0].gas=D6.consTotal.gas*D6.Unit.co2.gas,t.co2[0].kerosene=D6.consTotal.kerosene*D6.Unit.co2.kerosene,t.co2[0].car=D6.consTotal.car*D6.Unit.co2.gasoline,t.co2[0].total=D6.consTotal.co2Original,t},D6.getItemize=function(t){var e,s={},i=0;for(var o in D6.consList)e=D6.consList[o],s[i]={},s[i].title=e.title,s[i].consName=e.consName,s[i].subID=e.subID,s[i].sumConsName=e.sumConsName,s[i].sumCons2Name=e.sumCons2Name,s[i].countCall=e.countCall,s[i].co2=e.co2,s[i].co2Total=D6.consShow.TO.co2,s[i].electricity=e.electricity,s[i].nightelectricity=e.nightelectricity,s[i].gas=e.gas,s[i].water=e.water,s[i].coal=e.coal,s[i].hotwater=e.hotwater,s[i].kerosene=e.kerosene,s[i].car=e.car,s[i].color=e.color,i++;return s},D6.getItemizeGraph=function(t,e){var u="other";t&&(this.nowConsCode=t),t=this.nowConsCode,e&&(this.nowSortTarget=e);var l={co2:{sort:"co2",title:"kg",round:1,divide:1},energy:{sort:"jules",title:"GJ",round:1,divide:1e3},money:{sort:"cost",title:"yen",round:10,divide:1}}[(e=this.nowSortTarget)||"co2"],s={},i=function(t,e,s,i){var o=l.sort;s&&(o+="Original");var a=0,n=[],c=0;if("TO"==i){for(var r in t)"TO"!=r&&""!=r&&(n[c]={},n[c].compare=e,n[c].ratio=Math.round(t[r][o]/t[i][o]*1e3)/10,n[c][l.title]=Math.round(12*t[r][o]/l.divide*l.round)/l.round,n[c].item=t[r].title,c++,a+=t[r][o]);n[c]={},n[c].compare=e,n[c].ratio=Math.round((t.TO[o]-a)/t.TO[o]*1e3)/10,n[c][l.title]=Math.round(12*(t.TO[o]-a)/l.divide*l.round)/l.round,n[c].item=u}else if(t[i].partCons){var h=t[i].partCons;for(r in h)n[c]={},n[c].compare=e,n[c].ratio=Math.round(h[r][o]/t[i][o]*1e3)/10,n[c][l.title]=Math.round(12*h[r][o]/l.divide*l.round)/l.round,n[c].item=h[r].title+(0<h[r].subID?":"+(1==D6.viewparam.countfix_pre_after?h[r].countCall+h[r].subID:h[r].subID+h[r].countCall):""),c++,a+=h[r][o];n[c]={},n[c].compare=e,n[c].ratio=Math.round((t[i][o]-a)/t[i][o]*1e3)/10,n[c][l.title]=Math.round(12*(t[i][o]-a)/l.divide*l.round)/l.round,n[c].item=u}else n[c]={},n[c].compare=e,n[c].ratio=100,n[c][l.title]=Math.round(12*t[i][o]/l.divide*l.round)/l.round,n[c].item=t[i].title,c++;return n},o=["you","after","average"],a="";a=1==D6.targetMode?D6.scenario.defSelectValue.sel021[D6.area.area]:D6.scenario.defSelectValue.sel001[Math.max(1,D6.doc.data.i001)];var n=i(D6.consShow,o[0],!0,t);Array.prototype.push.apply(n,i(D6.consShow,o[1],!1,t)),Array.prototype.push.apply(n,i(D6.average.consList,o[2],!1,t));var c=[];for(var r in D6.consShow)"TO"!=r&&("TO"!=t&&r!=t||c.push({title:D6.consShow[r].title,target:D6.consShow[r][l.sort+"Original"],color:D6.consShow[r].color}));var h=[];if("TO"==t){for(r in D6.ObjArraySort(c,"target","desc"),c)h.push(c[r].title);h.push(u)}else h.push(c.title);return s.data=n,s.yaxis=l.title,s.ord=h,s.clist=c,s.averageCaption=a,s.captions=o,s.consTitle=D6.consShow[t].title,s},D6.dataItemize=function(){var t,e=D6.consShow,s=new Array;for(t in e)"TO"!=e[t].consCode&&s.push(e[t]);return s.sortOn("co2",18),s.unshift(e.TO),s},D6.getMonthly=function(){for(var t,e={},s={sort:"cost",title:"yen",round:1,divide:1},i=[{r:0,ene:"electricity",name:D6.Unit.name.electricity},{r:1,ene:"gas",name:D6.Unit.name.gas},{r:2,ene:"kerosene",name:D6.Unit.name.kerosene},{r:3,ene:"coal",name:D6.Unit.name.coal},{r:4,ene:"hotwater",name:D6.Unit.name.hotwater},{r:5,ene:"car",name:D6.Unit.name.car}],o=[],a=0,n=1;n<=12;n++)for(t=0;t<i.length;t++)D6.consShow.TO.monthlyPrice[i[t].ene]&&(o[a]={},o[a].month=n,o[a][s.title]=Math.round(D6.consShow.TO.monthlyPrice[i[t].ene][n-1]/s.divide*s.round)/s.round,o[a].energyname=i[t].ene,a++);return e.data=o,e.yaxis=s.title,e},D6.getGid=function(t){return D6.logicList[t].groupID},D6.getCommonParameters=function(){var t={};return t.co2Original=D6.consListByName.consTotal[0].co2Original,t.co2=D6.consListByName.consTotal[0].co2,t.costOriginal=D6.consListByName.consTotal[0].costOriginal,t.cost=D6.consListByName.consTotal[0].cost,t},(D6=D6||{}).getInputPage=function(t,e){var s,i=[],o=[],a=[],n=[],c=[],r=[],h=0,u="",l="",p=[];for(var m in D6.scenario.defEasyQues){var D=D6.scenario.defEasyQues[m];for(var f in u=D.cname,o[D.cname]=D.title,a[D.cname]=[],p[D.cname]=[],n[D.cname]=[],c[D.cname]=[],r[D.cname]=[],c[D.cname][u]=[],r[D.cname][u]=[],D.ques)!(s=D6.scenario.defInput[D.ques[f]])&&D6.debugMode&&console.log("defEasyQues error no "+D.ques[f]+" in scenarioset"),n[D.cname][u]=D.title,"String"==s.varType?r[D.cname][u].push(this.createTextArea(D.ques[f])):r[D.cname][u].push(this.createComboBox(D.ques[f]))}for(var m in D6.consShow){var g=D6.consShow[m].consName;for(var f in o[g]=D6.consShow[m].title,a[g]=[],p[g]=[],n[g]=[],c[g]=[],r[g]={},D6.doc.data)if(s=D6.scenario.defInput[f.substr(0,4)],(l=D6.logicList[s.cons]).consName==g||l.sumConsName==g&&"consTotal"!=l.sumConsName||l.sumCons2Name==g&&"consTotal"!=l.sumCons2Name||l.inputDisp==g){if(4==f.length)h=0,u=l.consName;else{if(0==(h=f.substr(4,2)))continue;u=l.consName+h}if(null==n[g][u]&&(0==h?n[g][u]=l.title:1==D6.viewparam.countfix_pre_after?n[g][u]=l.countCall+(l.titleList?l.titleList[h]:h):n[g][u]=(l.titleList?l.titleList[h]:h)+l.countCall,c[g][u]=l.inputGuide,r[g][u]=[]),l.addable&&p[g].indexOf(l.consName)<0&&(p[g].push(l.consName),a[g].push({consName:l.consName,caption:l.addable})),t!=g)continue;"String"==s.varType?r[g][u].push(this.createTextArea(f)):r[g][u].push(this.createComboBox(f))}}return i.group=o,i.groupAddable=a,i.subgroup=n,i.subguide=c,i.combos=r,i.consName=t,D6.logicList[t]||(t="consTotal"),i.title=D6.logicList[t].title,i.subName=e,i},D6.createComboBox=function(t,e){var s="",i="sel"+t.substr(1,3),o=t.substr(0,4),a=D6.scenario.defSelectValue[i],n=D6.scenario.defSelectData[i];if(!n||""==n[0])return this.createTextArea(t,e);var c=a.length,r=D6.doc.data[t],h=-1!=r?" class='written' ":"",u=D6.scenario.defInput[o].title;if(""==u||"#"==u.substr(0,1))return"";e||(s+="<tr><td class='qtitle' width='50%'>",s+=u,s+="<div class='tool-tips'>"+D6.scenario.defInput[o].text+(D6.debugMode?" "+t:"")+"</div>",s+="</td><td>"),s+="<select title='"+D6.scenario.defInput[o].title+"' name='"+t+"' id='"+t+"'",s+=" onchange='inchange(\""+t+"\");'",s+=h,s+=" >";for(var l=0;l<c;l++)a[l]&&(s+="<option value='"+n[l]+"' ",n[l]==r&&(s+="selected "),s+=">"+(D6.debugMode?n[l]+" ":"")+a[l]+"</option>");return s+="</select>",e||(s+="</td></tr>"),s},D6.createTextArea=function(t,e){var s="",i=(t.substr(1,3),t.substr(0,4)),o=D6.doc.data[t],a=""!=o&&-1!=o?" class='written' ":"",n="Number"==D6.scenario.defInput[i].varType;return e||(s+="<tr><td class='qtitle'>",s+=D6.scenario.defInput[i].title,s+="<div class='tool-tips' >"+D6.scenario.defInput[i].text+(D6.debugMode?" "+t:"")+"</div>",s+="</td><td>"),s+="<input type='text' title='"+D6.scenario.defInput[i].title+"' name='"+t+"' id='"+t+"' "+a+(n?"style='text-align:right;'":"")+" onchange='inchange(\""+t+"\");'"+(o&&-1!=o?" value='"+this.escapeHtml(o)+"'":"")+">",e||(s+=D6.scenario.defInput[i].unit+"</td></tr>"),s},D6.tfHandlerCombo=function(e){return function(t){Input[e]=t.target.value,t.target.removeEventListener(Event.ENTER_FRAME,arguments.callee)}},D6.nowQuesCode=0,D6.nowQuesID=-1,D6.quesOrder=[],D6.getFirstQues=function(t,e){if("easy01"==t)Array.isArray(e)?this.quesOrder=e:this.quesOrder=D6.scenario.defQuesOrder;else for(var s in D6.doc.data)D6.scenario.defInput[s.substr(0,4)].cons==e&&this.quesOrder.push(s);return this.nowQuesID=0,this.nowQuesCode=this.quesOrder[this.nowQuesID],this.getQues(this.nowQuesCode)},D6.getNextQues=function(){return this.nowQuesID++,this.nowQuesCode=this.quesOrder[this.nowQuesID],this.getQues(this.nowQuesCode)},D6.getPrevQues=function(){return this.nowQuesID--,this.nowQuesID<0&&(this.nowQuesID=0),this.nowQuesCode=this.quesOrder[this.nowQuesID],this.getQues(this.nowQuesCode)},D6.getQues=function(t){var e={};if(this.isEndOfQues())e.info="end";else{e.info="continue",e.id=t,e.numques=this.quesOrder.length,e.nowques=this.nowQuesID+1;var s=D6.scenario.defInput[t.substr(0,4)];e.title=s.title,e.text=s.text,e.unit=s.unit;var i=s.inputType;e.defSelectValue=D6.scenario.defSelectValue[i],e.defSelectData=D6.scenario.defSelectData[i],e.selected=D6.doc.data[t],e.consTitle=D6.logicList[s.cons].title}return e},D6.getQuesList=function(){var t=[];return t.queslist=D6.doc.data,t},D6.isEndOfQues=function(){var t=!1;return this.nowQuesID+1>this.quesOrder.length&&(t=!0),t},D6.escapeHtml=function(t){var e,s={"&":"&amp;","'":"&#x27;","`":"&#x60;",'"':"&quot;","<":"&lt;",">":"&gt;"},i="[";for(var o in s)s.hasOwnProperty(o)&&(i+=o);return i+="]",e=new RegExp(i,"g"),function(t){return(t=null==t?"":""+t).replace(e,function(t){return s[t]})}}(String),(D6=D6||{}).getMeasureDetail=function(t){var e={},s=D6.measureList[t];return e.title=s.title,e.titleShort=s.titleShort,e.measureName=s.measureName,e.mesID=s.mesID,e.groupID=s.groupID,e.consName=s.cons.consName,e.figNum=s.figNum,e.advice=s.advice,e.joyfull=s.joyfull,e.total=s.cons.total,e.co2Total=D6.consShow.TO.co2Original,e.selected=s.selected,e.co2=s.co2,e.co2Change=s.co2Change,e.co2ChangeOriginal=s.co2ChangeOriginal,e.jules=s.jules,e.cost=s.cost,e.costChange=s.costChange,e.costChangeOriginal=s.costChangeOriginal,e.costTotalChange=s.costTotalChange,e.costTotalChangeOriginal=s.costTotalChangeOriginal,e.costUnique=s.costUnique,e.priceOrg=s.priceOrg,e.priceNew=s.priceNew,e.payBackYear=s.payBackYear,e.lifeTime=s.lifeTime,e.electricity=s.electricity,e.gas=s.gas,e.coal=s.coal,e.hotwater=s.hotwater,e.car=s.car,e.kerosene=s.kerosene,e.water=s.water,e},D6.getMeasure=function(t,e,s){void 0===e&&(e=1e8),void 0===s&&(s=0);var i,o=[],a=0,n=[];for(var c in D6.measureList)n.push(D6.measureList[c]);for(var r in D6.ObjArraySort(n,D6.sortTarget),n)if(c=n[r].mesID,""!=(i=D6.measureList[c]).title&&"#"!=i.title.substr(0,1)){var h=D6.consListByName[t][0].partCons,u=!1;for(var l in h)i[h[l].consName]&&(u=!0);i[t]&&(u=!0),i.selected&&1==s||i.priceNew>e||(o[a]={},o[a].mesID=i.mesID,o[a].title=i.title,o[a].selected=i.selected,o[a].consName=t,o[a].groupID=i.groupID,o[a].measureName=i.measureName,o[a].consconsName=i.cons.consName,o[a].conssumConsName=i.cons.sumConsName,o[a].conssumCons2Name=i.cons.sumCons2Name,o[a].co2Change=i.co2Change,o[a].co2ChangeOriginal=i.co2ChangeOriginal,o[a].costChangeOriginal=i.costChangeOriginal,o[a].conssubID=i.cons.subID,o[a].consmesTitlePrefix=i.cons.mesTitlePrefix,o[a].relation=u,o[a].payBackYear=i.payBackYear,o[a].lifeTime=i.lifeTime,o[a].lifestyle=i.lifestyle,i.cons.color||"consTOTAL"==i.cons.consName?o[a].color=i.cons.color:o[a].color=i.cons.sumCons.color,a++)}return o},(D6=D6||{}).getDemandGraph=function(){var t={},e={},s=[];for(var i in D6.scenario.defInput)0<D6.scenario.defInput[i].demand&&(t[D6.scenario.defInput[i].cons]=[]);for(var o in D6.doc.data){var a=D6.scenario.defInput[o.substr(0,4)];if(t[a.cons]){var n=parseInt(o.substr(4,2));t[a.cons][n]||(t[a.cons][n]=[]),t[a.cons][n][a.demand]=D6.doc.data[o]}}var c=[],r=0,h="",u="",l=0,p=1,m=0,D=24,f=0,g="";for(i in t)for(o in f++,h=D6.logicList[i].addable,t[i])if(u=t[i][o][4]?t[i][o][4]:o,l=t[i][o][1]&&0<t[i][o][1]?t[i][o][1]:t[i][o][2]&&0<t[i][o][2]?t[i][o][2]/1e3:0,p=t[i][o][3]&&0<t[i][o][3]?t[i][o][3]:0,m=t[i][o][5]&&0<=t[i][o][5]?t[i][o][5]:0,D=t[i][o][6]&&0<=t[i][o][6]?t[i][o][6]:24,l*p!=0&&!(D<=m)){g=y(f);for(var d=0;d<24;d++)c[r]={},c[r].equip=h+"-"+(parseInt(u)?o:u),c[r].time=d,c[r].electricity_kW=m<=d&&d<D?Math.round(l*p*10)/10:0,s.push({title:c[r].equip,target:"electricity_kW",color:g}),r++}e.sumup=c,e.clist=s;var C=[];for(d=0;d<24;d++)C[d]={},C[d].equip="log",C[d].time=d,C[d].electricity_kW=D6.doc.data["i056"+(d+1)];return e.log=C,e;function y(t){var e=[100,100,100];for(var s in t<=3?e[t-1]=255:t<=6&&(e[t-4]=0),e)100==e[s]&&(e[s]=Math.floor(150*Math.random())+38);return"#"+(256*e[0]*256+256*e[1]+e[2]).toString(16)}},D6.getInputDemandSumup=function(){var t={},e={},s={},i={};for(var o in D6.scenario.defInput)0<D6.scenario.defInput[o].demand&&(t[D6.scenario.defInput[o].cons]=!0,e[D6.scenario.defInput[o].cons]={});var a="";for(var n in D6.doc.data){var c=D6.scenario.defInput[n.substr(0,4)];if(t[c.cons]){a=this.createComboBox(n,!0);var r=parseInt(n.substr(4,2));s[c.cons]=D6.consListByName[c.cons][0].addable,e[c.cons][r]||(e[c.cons][r]=[]),e[c.cons][r][c.demand]=a}}return i.data=e,i.title=s,i},D6.getInputDemandLog=function(){for(var t=[],e=0;e<24;e++)t[e]=this.createComboBox("i056"+(e+1),!0);return t},(D6=D6||{}).getEvaluateAxisPoint=function(t,e){var s={0:[0,"",""],1:[0,"",""],2:[0,"",""]},i=[];for(var o in D6.scenario.defEasyQues)if(D6.scenario.defEasyQues[o].cname==e){i=D6.scenario.defEasyQues[o].ques;break}if(""==i)return s;for(var a=0;a<3;a++){var n=0,c=0,r=0,h="",u=0,l="",p=0,m="",D=0,f="",g=0;for(var d in i){var C=D6.scenario.defInput[i[d]],y=D6.doc.data[i[d]],T=C["d"+(a+1)+"w"];""!=T&&(C["d"+(a+1)+"d"]*T,y!=C.defaultValue&&void 0!==y&&(n+=2*T,p<(g=y>=C["d"+(a+1)+"1t"]?C["d"+(a+1)+"1p"]*T:""!=C["d"+(a+1)+"2t"]&&y>=C["d"+(a+1)+"2t"]?C["d"+(a+1)+"2p"]*T:""!=C["d"+(a+1)+"3t"]&&y>=C["d"+(a+1)+"3t"]?C["d"+(a+1)+"3p"]*T:0)&&(p=g,m=C.title,r<p&&(p=r,m=h,r=g,h=C.title)),g-2*T<D&&(D=g-2*T,f=C.title,D<u&&(D=u,f=l,u=g,l=C.title)),c+=g))}s[a][0]=c/(0==n?1:n)*100,s[a][1]=(h?"<li>"+h+"</li>":"")+(m?"<li>"+m+"</li>":""),s[a][2]=(l?"<li>"+l+"</li>":"")+(f?"<li>"+f+"</li>":"")}return s},(D6=D6||{}).setscenario=function(e,s,t){var i,o=!1;if("add"==e&&(o=!0),e||(e=[]),s||(s=[]),!o){for(var a in D6.scenario.setDefs(),D6.scenario.areafix(),t)t[a][2]&&(D6.scenario.defInput[t[a][0]][t[a][1]]=t[a][2]);D6.logicList=D6.scenario.getLogicList()}var n,c,r,h,u,l,p=D6.consList;for(n in D6.consCount=0,D6.logicList)c=D6.logicList[n],D6.consListByName[c.consName]=[],"consTotal"!=c.sumConsName&&"consTotal"!=c.consName||(p[D6.consCount]=c,D6.consShow[c.consCode]=p[D6.consCount],D6.consListByName[c.consName].push(p[D6.consCount]),D6.consCount++);for(n in D6.logicList)if("consTotal"!=(c=D6.logicList[n]).sumConsName&&"consTotal"!=c.consName)if(0==c.orgCopyNum)p[D6.consCount]=c,D6.consListByName[c.consName].push(p[D6.consCount]),D6.consCount++;else for(i=0;i<=c.orgCopyNum;i++)p[D6.consCount]=D6.object(c),p[D6.consCount].setsubID(i),D6.consListByName[c.consName].push(p[D6.consCount]),D6.consCount++;for(d=0;d<p.length;d++){for((r=p[d]).measures=[],r.partCons=[],r.sumCons=this.getTargetConsList(r.sumConsName),r.sumCons2=this.getTargetConsList(r.sumCons2Name),u=[],l=[],i=0;i<p.length;i++)(h=p[i]).sumConsName===r.consName&&(1<=h.orgCopyNum?1<=r.orgCopyNum?r.subID==h.subID&&(r.partConsName=h.consName,u.push(h)):(r.partConsName=h.consName,u.push(h)):u.push(h)),h.sumCons2Name==r.consName&&(1<=h.orgCopyNum?1<=r.orgCopyNum?r.subID==h.subID&&(r.partCons2Name=h.consName,l.push(h)):(r.partCons2Name=h.consName,l.push(h)):l.push(h));1<=u.length?r.partCons=u:r.partCons="",1<=l.length?r.partCons2=l:r.partCons2=""}for(d in this.mesCount=0,p)this.addMeasureEachCons(p[d]);var m,D=function(t){return""==t.cons||(e.length<=0?!(s.length<=0)&&!(0<=s.indexOf(t)):0<=e.indexOf(t))};for(m in D6.scenario.defInput)if(!D(m)){var f=D6.scenario.defInput[m];if(n=D6.logicList[f.cons])if(0<n.orgCopyNum)for(i=0;i<n.orgCopyNum;i++)D6.inSet(m+(i+1),f.defaultValue);else D6.inSet(m,f.defaultValue)}var g=[];if(D6.scenario.defEasyQues){for(var d in D6.scenario.defEasyQues[0].ques)D(D6.scenario.defEasyQues[0].ques[d])||g.push(D6.scenario.defEasyQues[0].ques[d]);for(d in D6.scenario.defEasyQues[0].ques=[],g)D6.scenario.defEasyQues[0].ques.push(g[d])}},D6.addMeasureEachCons=function(t){for(var e in D6.scenario.defMeasures)t.consName==D6.scenario.defMeasures[e].refCons&&(this.measureList[this.mesCount]=D6.object(D6.MeasureBase),this.measureList[this.mesCount].Constructor(t,D6.scenario.defMeasures[e],this.mesCount),t.measures[e]=this.measureList[this.mesCount],this.mesCount++)},D6.addConsSetting=function(t){var e="",s="",i=!1;for(e in D6.logicList){for(var o in s=D6.logicList[e].consAddSet)if(s[o]==t||e==t){for(var a in D6.logicList[e].orgCopyNum=D6.logicList[e].orgCopyNum+1,s)D6.logicList[s[a]].orgCopyNum=D6.logicList[s[a]].orgCopyNum+1;i=!0;break}if(i)break}i||(D6.logicList[t].orgCopyNum=D6.logicList[t].orgCopyNum+1)},(D6=D6||{}).calcCons=function(){var t;for(D6.area.setCalcBaseParams(),t=0;t<D6.consList.length;t++)this.consList[t].precalc();for(t=0;t<D6.consList.length;t++)this.consList[t].calc(),this.consList[t].calcCO2();for(t=0;t<this.consList.length;t++)this.consList[t].calc2nd(),this.consList[t].calcCO2();for(this.calcConsAdjust(),t=0;t<this.consList.length;t++)this.consList[t].calcCost(),this.consList[t].calcJules(),this.isOriginal&&(this.consList[t].co2Original=this.consList[t].co2,this.consList[t].costOriginal=this.consList[t].cost,this.consList[t].julesOriginal=this.consList[t].jules)},D6.calcConsAdjust=function(){var t,e,s,i,o=D6.object(D6.Energy);D6.energyAdj=D6.object(D6.Energy);var a=!0,n="";for(t in this.consShow)if("consTotal"!=(i=this.consShow[t]).consName&&(o.clear(),1<=i.partCons.length)){for(n=i.partCons[0].consName,e=1;e<i.partCons.length;e++)o.add(i.partCons[e]),n!=i.partCons[e].consName&&(a=!1);if(o.calcCO2(),"no"==i.residueCalc)i.copy(o),i.add(i.partCons[0]),i.calcCO2();else if(o.co2>i.co2){for(e=1;e<=void 0;e++)i.partCons[e].multiply(i.co2/o.co2);i.partCons[0].clear()}else a?(o.sub(i),o.multiply(-1),i.partCons[0].copy(o)):(i.copy(o),i.add(i.partCons[0]),i.calcCO2())}for(t in o.clear(),this.consShow)if("TO"!=t)for(s in D6.Unit.co2)o[s]+=this.consShow[t][s];var c=this.consShow.TO.noConsData;if(o.electricity+=.1*this.consShow.TO.electricity,c){for(s in D6.Unit.co2)"electricity"==s?this.consShow.TO[s]<o[s]&&(this.consShow.TO[s]=o[s]):this.consShow.TO[s]=o[s];this.consShow.TO.calcCO2()}else{for(s in D6.Unit.co2)0==o[s]?this.energyAdj[s]=1:(this.energyAdj[s]=this.consShow.TO[s]/o[s],void 0!==this.consShow.TO.noPriceData[s]&&this.consShow.TO.noPriceData[s]&&(this.energyAdj[s]<.5&&(this.consShow.TO[s]*=.5/this.energyAdj[s],this.energyAdj[s]=.5),2<this.energyAdj[s]&&"electricity"!=s&&(this.consShow.TO[s]*=2/this.energyAdj[s],this.energyAdj[s]=2)),this.energyAdj[s]="electricity"!=s?Math.max(.2,Math.min(1.5,this.energyAdj[s])):Math.max(.3,Math.min(3,this.energyAdj[s])));for(t in this.consList)"consTotal"!=this.consList[t].consName&&this.consList[t].calcAdjust(this.energyAdj)}},D6.getTargetConsList=function(t){var e,s,i=0,o=new Array;if(""!=t){for(e=0;e<this.consList.length;e++)this.consList[e].consName==t&&(o[i++]=this.consList[e]);s=1==o.length?o[0]:o}return s},D6.getGid=function(t){return D6.logicList[t].groupID},D6.getCommonParameters=function(){var t={};return t.co2Original=D6.consListByName.consTotal[0].co2Original,t.co2=D6.consListByName.consTotal[0].co2,t.costOriginal=D6.consListByName.consTotal[0].costOriginal,t.cost=D6.consListByName.consTotal[0].cost,t},(D6=D6||{}).calcAverage=function(){for(var t in D6.averageMode=!0,this.calcCons(),this.average.consList={},this.consShow)this.average.consList[t]={},this.average.consList[t].co2=this.consShow[t].co2,this.average.consList[t].cost=this.consShow[t].cost,this.average.consList[t].jules=this.consShow[t].jules,this.average.consList[t].title=this.consShow[t].title;D6.averageMode=!1},D6.rankIn100=function(t){var e;return t<=0&&(t=.1),(e=Math.log(t))<-.5?Math.max(1,Math.round((e+1)/.5*10)):e<.5?Math.round((e+.5)/1*80+10):Math.min(100,Math.round((e-.5)/1*10)+90)},(D6=D6||{}).calcMeasures=function(t){var e,s,i,o,a,n=[];for(a in this.measureList)n[this.measureList[a].mesID]=this.measureList[a].selected;for(e=this.clearSelectedMeasures(t),s=0;s<e.length;s++)o=i=e[s].mesID,a=this.measureList[o],n[i]&&!a.selected&&(a.selected=!0,this.isOriginal=!1,a.co2Change<0?(a.co2ChangeSumup=a.co2Change,a.costChangeSumup=a.costChange,a.costTotalChangeSumup=a.costTotalChange,a.addReduction(),e=this.calcMeasuresOne(-1)):(a.co2ChangeSumup=0,a.costChangeSumup=0,a.costTotalChangeSumup=0));for(o in this.measureList)(a=this.measureList[o]).selected=n[a.mesID],a.selected&&(this.isOriginal=!1);var c=[];for(s=0;s<e.length;s++)e[s].groupID!=t&&-1!=t||c.push(e[s]);return this.resMeasure=c,D6.debugMode&&(console.log("measure calculate in d6.js calcMeasures() --- "),console.log(c),console.log("d6--- "),console.log(D6)),c},D6.calcMeasuresLifestyle=function(t){var e,s=new Array,i=D6.calcMeasures(t);for(e in i)1==i[e].lifestyle&&s.push(i[e]);return s},D6.calcMeasuresNotLifestyle=function(t){var e,s=[],i=D6.calcMeasures(t);for(e in i)1!=i[e].lifestyle&&s.push(i[e]);return s},D6.calcMeasuresOne=function(t){var e,s,i=this.sortTarget;for(s in e=new Array,this.consList)if((-1==t||this.consList[s].groupID==t)&&(this.consList[s].calcMeasureInit(),this.consList[s].calcMeasure(),1<=this.consList[s].subID)){var o=this.consListByName[this.consList[s].consName][0];for(var a in o.measures)o.measures[a].selected&&this.consList[s].measures[a].copy(o)}for(var n in s=0,this.measureList){var c=this.measureList[n];c.calcSave(),e[s]={},e[s][i]=c[i],e[s].mesID=c.mesID,e[s].groupID=c.groupID,e[s].lifestyle=c.lifestyle,s++}return this.ObjArraySort(e,i),e},D6.clearSelectedMeasures=function(t){this.isOriginal=!0,this.calcCons();for(var e=0;e<D6.measureList.length;e++)(this.measureList[e].groupID==t||t<0)&&(this.measureList[e].selected=!1);return this.calcMeasuresOne(t)},D6.calcMaxMeasuresList=function(t,e){var s,i,o,a,n,c=0,r=0,h=0,u=0,l=0;for(void 0===t&&(t=-1),(void 0===e||e<1)&&(e=15),this.clearSelectedMeasures(t),i=0;i<e;i++){for(c=-1,o=r=0;o<this.measureList.length;o++)((a=this.measureList[o]).groupID==t||t<0)&&(1==this.measureList[o].selected&&isFinite(a.co2Change)&&!isNaN(a.co2Change)||r>a.co2Change&&(r=a.co2Change,h=a.costChange,c=a.mesID,n=a));if(-1==c)break;u+=r,l+=h,this.measureAdd(c),n.addReduction(),this.calcMeasuresOne(-1)}return(s=this.calcMeasures(t)).sumCO2=u,s.sumCOST=l,s},(D6=D6||{}).inSet=function(t,e){var s=t.substr(0,4);"String"==D6.scenario.defInput[s].varType||"Boolean"==D6.scenario.defInput[s].varType?D6.doc.data[t]=e:(e=D6.toHalfWidth(e),D6.doc.data[t]=parseFloat(e)?parseFloat(e):0)},D6.measureAdd=function(t){return this.measureList[t].groupID,this.measureList[t].selected=!0,this.isOriginal=!1,""},D6.measureDelete=function(t){return this.measureList[t].selected=!1,this.measureList[t].groupID,""},(D6=D6||{}).toHalfWidth=function(t){return t?t.replace(/[！-～]/g,function(t){return String.fromCharCode(t.charCodeAt(0)-65248)}):t},D6.ObjArraySort=function(t,s,e){var i=1;e&&"desc"==e.toLowerCase()&&(i=-1),t.sort(function(t,e){return t[s]<e[s]?-1*i:t[s]==e[s]?0:1*i})},(D6=D6||{}).scenario={defCons:[],defMeasures:[],defEquipment:[],defEquipmentSize:[],defInput:[],defSelectValue:[],defSelectData:[],defQuesOrder:[],getLogicList:function(){var t=new Array;return t.consTotal=D6.consTotal,t.consEnergy=D6.consEnergy,t.consSeason=D6.consSeason,t.consHWsum=D6.consHWsum,t.consHWshower=D6.consHWshower,t.consHWtub=D6.consHWtub,t.consHWdresser=D6.consHWdresser,t.consHWdishwash=D6.consHWdishwash,t.consHWtoilet=D6.consHWtoilet,t.consCOsum=D6.consCOsum,t.consACcool=D6.consACcool,t.consHTsum=D6.consHTsum,t.consHTcold=D6.consHTcold,t.consACheat=D6.consACheat,t.consAC=D6.consAC,t.consRFsum=D6.consRFsum,t.consRF=D6.consRF,t.consLIsum=D6.consLIsum,t.consLI=D6.consLI,t.consTVsum=D6.consTVsum,t.consTV=D6.consTV,t.consDRsum=D6.consDRsum,t.consCRsum=D6.consCRsum,t.consCR=D6.consCR,t.consCRtrip=D6.consCRtrip,t.consCKpot=D6.consCKpot,t.consCKcook=D6.consCKcook,t.consCKrice=D6.consCKrice,t.consCKsum=D6.consCKsum,t},setDefs:function(){var t=[],e=[];t.sel021=["select","hokkaido"],e.sel021=["-1","1"],t.sel022=["select","north","south"],e.sel022=["-1","1","2"],this.defCalcAverage=["i001","i005","i021"],this.measuresSortChange="i010",this.measuresSortTarget=["co2ChangeOriginal","co2ChangeOriginal","costTotalChangeOriginal","co2ChangeW1Original","co2ChangeW2Original"],this.defEasyQues=[{title:"easy input",cname:"easy01",ques:["i021","i001","i002","i003","i051","i061","i063","i064","i075","i101","i103","i105","i116","i201","i202","i204","i205","i263","i501","i601","i701","i010"]},{title:"Action Point",cname:"action01",ques:["i502","i501","i621","i601","i205","i041","i237","i263","i061","i003","i001","i105","i106","i116","i121","i421","i721","i821"]}],this.defQuesOrder=["i010","i021","i001","i002","i003","i051","i061","i063","i064","i075","i101","i103","i105","i116","i201","i202","i204","i205","i263","i501","i601","i701"],this.defMeasures=[],this.defInput=[],this.defSelectValue=t,this.defSelectData=e,this.defEquipment=[],this.defEquipmentSize=[],D6.area.setCalcBaseParams=function(){D6.area.setPersonArea(D6.doc.data.i001,D6.doc.data.i021,D6.doc.data.i023)},D6.area.getSeasonParamCommon=function(){return D6.area.getSeasonParam(D6.area.area)}}},(D6=D6||{}).consEnergy=D6.object(D6.ConsBase),D6.consEnergy.init=function(){this.consName="consEnergy",this.consCode="",this.title="General Energy Setting",this.orgCopyNum=0,this.groupID="0",this.color="#ff0000",this.countCall="",this.sumConsName="consTotal",this.sumCons2Name="",this.inputGuide="the use of energy of the whole house, monthly bills",this.partConsName=[]},D6.consEnergy.init(),D6.consEnergy.calc=function(){this.clear()},D6.consEnergy.calcMeasure=function(){},(D6=D6||{}).consSeason=D6.object(D6.ConsBase),D6.consSeason.init=function(){this.titleList=["","winter","spring/fall","summer"],this.consName="consSeason",this.consCode="",this.title="",this.orgCopyNum=3,this.groupID="2",this.color="#ff0000",this.countCall="",this.residueCalc="sumup",this.sumConsName="",this.sumCons2Name="consTotal",this.inputDisp="consTotal",this.inputGuide="For monthly water and electricity charges per season. Please fill in the approximate value."},D6.consSeason.init(),D6.consSeason.calc=function(){this.clear()},D6.consSeason.calcMeasure=function(){},(D6=D6||{}).consTotal=D6.object(D6.ConsBase),D6.consTotal.init=function(){this.consName="consTotal",this.consCode="TO",this.title="whole",this.orgCopyNum=0,this.groupID="9",this.color="#a9a9a9",this.countCall="",this.sumConsName="",this.sumCons2Name="",this.inputGuide="Basic information about the area and house",this.noPriceData={},this.ratioNightEcocute=.4,this.ratioNightHWElec=.6,this.solarSaleRatio=.6,this.generateEleUnit=1e3,this.reduceHEMSRatio=.1,this.standardSize=3.6,this.noConsData=!0,this.averagePriceElec,this.seasonConsPattern=[1.4,1,1.2]},D6.consTotal.init(),D6.consTotal.precalc=function(){this.clear(),this.person=this.input("i001",3),this.solarSet=this.input("i051",0),this.solarKw=this.input("i052",3.5*this.solarSet),this.solarYear=this.input("i053",0),this.priceEle=this.input("i061",D6.area.averageCostEnergy.electricity),this.priceEleSpring=this.input("i0912",-1),this.priceEleSummer=this.input("i0913",-1),this.priceEleWinter=this.input("i0911",-1),this.noPriceData.electricity=-1==this.input("i061",-1)&-1==this.priceEleSpring&-1==this.priceEleSummer&-1==this.priceEleWinter,this.priceEleSell=this.input("i062",0),this.priceGas=this.input("i063",D6.area.averageCostEnergy.gas),this.priceGasSpring=this.input("i0932",-1),this.priceGasSummer=this.input("i0933",-1),this.priceGasWinter=this.input("i0931",-1),this.noPriceData.gas=-1==this.input("i063",-1)&-1==this.priceGasSpring&-1==this.priceGasSummer&-1==this.priceGasWinter,this.houseType=this.input("i002",-1),this.houseSize=this.input("i003",1==this.person?60:80+10*this.person),this.heatEquip=this.input("i202",-1),this.priceKerosSpring=this.input("i0942",-1),this.priceKerosSummer=this.input("i0943",-1),this.priceKerosWinter=this.input("i0941",-1),this.noPriceData.kerosene=-1==this.priceKerosSpring&-1==this.priceKerosSummer&-1==this.priceKerosWinter,-1==this.priceKerosWinter&&(D6.area.averageCostEnergy.kerosene<1e3?this.priceKeros=this.input("i064",0):this.priceKeros=this.input("i064",D6.area.averageCostEnergy.kerosene/D6.area.seasonMonth.winter*12)),this.priceCar=this.input("i075",D6.area.averageCostEnergy.car),this.noPriceData.car=-1==this.input("i075",-1),this.equipHWType=this.input("i101",1),this.generateEleUnit=D6.area.unitPVElectricity,this.seasonPrice={electricity:[this.priceEleWinter,this.priceEleSpring,this.priceEleSummer],gas:[this.priceGasWinter,this.priceGasSpring,this.priceGasSummer],kerosene:[this.priceKeros,this.priceKerosSpring,this.priceKerosSummer],car:[-1,-1,-1]},this.monthlyPrice={electricity:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],gas:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],kerosene:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],car:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]},D6.area.averageCostEnergy.kerosene<1e3&&this.input("i063",-1)<0&&this.input("i0931",-1)<0&&this.input("i0932",-1)<0&&this.input("i0933",-1)<0&&(this.keros2gas=D6.area.averageCostEnergy.kerosene/D6.Unit.price.kerosene*D6.Unit.calorie.kerosene/D6.Unit.calorie.gas*D6.Unit.price.gas,this.priceGasSpring+=this.keros2gas,this.priceGasWinter+=this.keros2gas)},D6.consTotal.calc=function(){var t,e,s=D6.area.getSeasonParamCommon();t=D6.calcMonthly(this.priceEle,this.seasonPrice.electricity,this.monthlyPrice.electricity,s.electricity,"electricity"),this.priceEle=t.ave,this.seasonPrice.electricity=t.season,this.monthlyPrice.electricity=t.monthly,this.noConsData=t.noConsData&&-1==this.input("i061",-1)&&this.noPriceData.gas&&this.noPriceData.car&&this.noPriceData.kerosene,5==this.equipHWType?(this.averagePriceElec=this.ratioNightHWElec*D6.Unit.price.nightelectricity+(1-this.ratioNightHWElec)*D6.Unit.price.electricity,this.allDenka=!0):6==this.equipHWType?(this.averagePriceElec=this.ratioNightEcocute*D6.Unit.price.nightelectricity+(1-this.ratioNightEcocute)*D6.Unit.price.electricity,this.allDenka=!0):(this.averagePriceElec=D6.Unit.price.electricity,this.allDenka=!1),e=this.allDenka?D6.Unit.price.nightelectricity:0;var i=this.generateEleUnit*this.solarKw/12;this.pvRestrict=1,2!=D6.area.electCompany&&3!=D6.area.electCompany&&5!=D6.area.electCompany||(this.pvRestrict=0);var o=D6.Unit.price.sellelectricity;1990<this.solarYear&&this.solarYear<=2010?o=48:2011==this.solarYear||2012==this.solarYear?o=42:2013==this.solarYear?o=38:2014==this.solarYear?o=37:2015==this.solarYear?o=1==this.pvRestrict?35:33:2016==this.solarYear?o=1==this.pvRestrict?33:31:2017<=this.solarYear&&this.solarYear<2020?o=1==this.pvRestrict?30:28:this.solarYear<2100&&(o=20),0<this.solarKw?(this.grossElectricity=(1-this.solarSaleRatio)*i+Math.max(0,this.priceEle-this.priceEleSell+this.solarSaleRatio*i*o-e)/this.averagePriceElec,this.electricity=this.grossElectricity-i):(this.electricity=(this.priceEle-e)/this.averagePriceElec,this.grossElectricity=this.electricity),t=D6.calcMonthly(this.priceGas,this.seasonPrice.gas,this.monthlyPrice.gas,s.gas,"gas"),this.priceGas=t.ave,this.seasonPrice.gas=t.season,this.monthlyPrice.gas=t.monthly,this.gas=(this.priceGas-D6.Unit.priceBase.gas)/D6.Unit.price.gas,t=D6.calcMonthly(this.priceKeros,this.seasonPrice.kerosene,this.monthlyPrice.kerosene,s.kerosene,"kerosene"),this.priceKeros=t.ave,this.seasonPrice.kerosene=t.season,this.monthlyPrice.kerosene=t.monthly,4==this.heatEquip&&this.priceKeros<1e3&&(this.priceKeros=2e3),this.kerosene=this.priceKeros/D6.Unit.price.kerosene,t=D6.calcMonthly(this.priceCar,this.seasonPrice.car,this.monthlyPrice.car,s.car,"car"),this.priceCar=t.ave,this.seasonPrice.car=t.season,this.monthlyPrice.car=t.monthly,this.car=this.priceCar/D6.Unit.price.car},D6.consTotal.calcMeasure=function(){var t,e,s=this.reduceHEMSRatio;if(e=1==this.pvRestrict?30:28,(t=this.measures.mTOsolar).copy(this),0==this.solarKw&&2!=this.houseType){var i=this.generateEleUnit*this.standardSize/12,o=i*this.solarSaleRatio*e+i*(1-this.solarSaleRatio)*D6.Unit.price.electricity,a=this.electricity*s*D6.Unit.price.electricity;t.electricity=this.electricity*(1-s)-i,t.costUnique=this.cost-o-a,t.priceNew=this.standardSize*t.priceOrg,t.advice=D6.scenario.defMeasures.mTOsolar.advice+"<br>("+this.standardSize+"kW)"}(t=this.measures.mTOhems).copy(this),this.isSelected("mTOsolar")||(t.electricity=this.electricity*(1-this.reduceHEMSRatio)),(t=this.measures.mTOsolarSmall).copy(this);t.electricity-=.015*this.generateEleUnit/12},(D6=D6||{}).consHWsum=D6.object(D6.ConsBase),D6.consHWsum.init=function(){this.consName="consHWsum",this.consCode="HW",this.title="hot water supply",this.orgCopyNum=0,this.groupID="1",this.color="#ffb700",this.countCall="",this.sumConsName="consTotal",this.sumCons2Name="",this.inputGuide="how to use hot water supply in general",this.hwEnergy=0,this.waterTemp=18,this.hotWaterTemp=42,this.tabWaterLitter=200,this.showerWaterLitterUnit=10,this.reduceRateShowerHead=.3,this.showerWaterMinutes=5,this.otherWaterLitter=50,this.tankLossWatt=100,this.tabTemplatureDown=2,this.tabTemplatureInsulationDown=.5,this.performanceGas=.73,this.performanceEcojozu=.877,this.performanceElec=.8,this.performanceEcocute=3,this.performanceEnefarmEle=.289,this.performanceEnefarmHW=.33,this.performanceKeepWithTank=.6,this.reduceRateSaveMode=.2,this.reduceRateSolar=.4,this.reduceRateSolarSystem=.5,this.warmerElec_kWh_y=200,this.water_m3_d=.1,this.reduceRateKeepStop},D6.consHWsum.init(),D6.consHWsum.precalc=function(){this.clear(),this.person=this.input("i001",3),this.housetype=this.input("i002",1),this.prefecture=this.input("i021",13),this.solarHeater=this.input("i102",3),this.heatArea=D6.area.getHeatingLevel(this.prefecture),this.tabDayWeek=this.input("i103",1==this.heatArea||6==this.heatArea?2:6),this.tabDayWeekSummer=this.input("i104",2);var t=this.input2seasons("i105","i106",this.showerWaterMinutes*this.person);this.showerMinutes=t[0],this.showerMinutesSummer=t[1],this.showerHotTimeSpan=this.input("i112",10),this.savingShower=this.input("i116",-1),this.tabKeepHeatingTime=this.input("i108",1<this.person?3:0),this.keepMethod2=this.input("i111",5),this.keepMethod=this.input("i110",this.keepMethod2),this.tabInsulation=this.input("i117",-1),this.tabHeight=this.input("i107",8),this.equipType=this.input("i101",-1),this.priceGas=D6.consShow.TO.priceGas,this.priceKeros=D6.consShow.TO.priceKeros,this.dresserMonth=this.input("i114",4),this.dishWashMonth=this.input("i115",4),this.dishWashWater=this.input("i113",3),this.heaterPerformance=this.input("i121",2),this.cookingFreq=this.input("i802",6),this.keepSeason=this.input("i131",2)},D6.consHWsum.calc=function(){switch(this.equipType<=0&&(0==this.priceGas?3e3<this.priceKeros?this.equipType=3:this.equipType=5:this.equipType=1),1==this.equipType&&1==this.heaterPerformance&&this.equipType,5==this.equipType&&1==this.heaterPerformance&&this.equipType,2==this.equipType&&3==this.heaterPerformance&&this.equipType,this.waterTemp=D6.area.getWaterTemplature(),this.waterTemp=1==this.solarHeater?.4*this.hotWaterTemp+.6*this.waterTemp:2==this.solarHeater?.15*this.hotWaterTemp+.85*this.waterTemp:this.waterTemp,this.showerWaterLitter=((this.showerMinutes*(12-D6.area.seasonMonth.summer)+this.showerMinutesSummer*D6.area.seasonMonth.summer)/12*(1==this.savingShower?1-this.reduceRateShowerHead:1)+this.showerHotTimeSpan/60*5)*this.showerWaterLitterUnit,this.consHWtubLitter=this.tabWaterLitter*this.tabHeight/10*(this.tabDayWeek*(12-D6.area.seasonMonth.summer)+this.tabDayWeekSummer*D6.area.seasonMonth.summer)/12/7,this.allLitter=this.consHWtubLitter+this.showerWaterLitter+this.otherWaterLitter,this.heatTapEnergy=this.allLitter*(this.hotWaterTemp-this.waterTemp)*365/12,this.tabKeepEnergy=this.consHWtubLitter*this.tabKeepHeatingTime*365/12*(1==this.tabInsulation||2==this.tabInsulation?this.tabTemplatureInsulationDown:this.tabTemplatureDown)/(4==this.equipType||5==this.equipType?this.performanceKeepWithTank:1)*this.keepMethod/10,this.heatEnergy=this.heatTapEnergy+this.tabKeepEnergy,this.hwEnergy=this.heatEnergy,this.consHWtubRate=this.consHWtubLitter/this.allLitter+this.tabKeepEnergy/this.heatEnergy,this.consHWshowerRate=this.showerWaterLitter/this.allLitter*(this.heatTapEnergy/this.heatEnergy),this.consHWdresserRate=this.otherWaterLitter/2/this.allLitter*(this.heatTapEnergy/this.heatEnergy)*this.dresserMonth/6,this.consHWdishwashRate=this.otherWaterLitter/2/this.allLitter*(this.heatTapEnergy/this.heatEnergy)*(99==this.dishWashMonth?1:this.dishWashMonth/6)*(4-this.dishWashWater)/2*this.cookingFreq/6,this.tanklossEnergy=this.tankLossWatt/1e3*D6.Unit.calorie.electricity*365/12,this.equipType){case 1:this.mainSource="gas",this[this.mainSource]=this.heatEnergy/this.performanceGas/D6.Unit.calorie[this.mainSource];break;case 2:this.mainSource="gas",this[this.mainSource]=this.heatEnergy/this.performanceEcojozu/D6.Unit.calorie[this.mainSource];break;case 3:this.mainSource="kerosene",this[this.mainSource]=this.heatEnergy/this.performanceGas/D6.Unit.calorie[this.mainSource];break;case 4:this.mainSource="kerosene",this[this.mainSource]=this.heatEnergy/this.performanceEcojozu/D6.Unit.calorie[this.mainSource];break;case 5:this.mainSource="electricity",this[this.mainSource]=(this.heatEnergy+this.tanklossEnergy)/this.performanceElec/D6.Unit.calorie[this.mainSource];break;case 6:this.mainSource="electricity",this[this.mainSource]=(this.heatEnergy+this.tanklossEnergy)/this.performanceEcocute/D6.Unit.calorie[this.mainSource];break;case 7:case 8:default:this.mainSource="gas",this.gas=this.heatEnergy/this.performanceEcojozu/D6.Unit.calorie.gas}this.electricity+=this.warmerElec_kWh_y/12*(4-this.keepSeason)/3,this.water+=this.water_m3_d*this.person*30,this.reduceRateShowerTime=1/(this.showerMinutes/this.person-1)*this.consHWshowerRate,this.reduceRateTabKeep=this.tabKeepEnergy/(this.heatEnergy*this.consHWtubLitter/this.allLitter),this.reduceRateInsulation=1==this.tabInsulation||2==this.tabInsulation?0:this.reduceRateTabKeep*(this.tabTemplatureDown-this.tabTemplatureInsulationDown)/this.tabTemplatureDown;var t=this.tabDayWeekSummer*D6.area.seasonMonth.summer,e=this.tabDayWeek*(12-D6.area.seasonMonth.summer);this.reduceRateStopTabSummer=t/(t+e)},D6.consHWsum.calcMeasure=function(){var t=!1;(this.isSelected("mHWecocute")||this.isSelected("mHWecofeel")||this.isSelected("mHWenefarm"))&&(t=!0);var e=this.hwEnergy*this.co2/this.co2Original;if((-1==this.equipType||1==this.equipType||3==this.equipType||5==this.equipType)&&!t&&(1==this.housetype&&(this.measures.mHWecocute.clear(),this.measures.mHWecocute.nightelectricity=(e+this.tanklossEnergy)/this.performanceEcocute/D6.Unit.calorie.nightelectricity),3==this.equipType&&(this.measures.mHWecofeel.clear(),this.measures.mHWecofeel.kerosene=e/this.performanceEcojozu/D6.Unit.calorie.kerosene),this.measures.mHWecojoze.clear(),this.measures.mHWecojoze.gas=e/this.performanceEcojozu/D6.Unit.calorie.gas,1==this.housetype)){this.measures.mHWenefarm.clear();var s=e-5e5/12;this.measures.mHWenefarm.gas=(s/this.performanceEnefarmHW+5e5/12/this.performanceEcojozu)/D6.Unit.calorie.gas,this.measures.mHWenefarm.electricity=-s/this.performanceEnefarmHW*this.performanceEnefarmEle/D6.Unit.calorie.electricity}6!=this.equipType&&5!=this.equipType||this.measures.mHWsaveMode.calcReduceRate(this.reduceRateSaveMode);var i=!1;(this.isSelected("mHWecocute")||this.isSelected("mHWenefarm")||this.isSelected("mHWsolarSystem")||this.isSelected("mHWsolarHeater"))&&(i=!0),5==this.equipType||6==this.equipType||i||1!=this.housetype||(this.measures.mHWsolarHeater.calcReduceRate(this.reduceRateSolar),this.measures.mHWsolarSystem.calcReduceRate(this.reduceRateSolarSystem))},D6.consHWsum.calcAdjustStrategy=function(t){this.heatEnergy*=t[this.mainSource],this.tanklossEnergy*=t[this.mainSource],this.hwEnergy*=t[this.mainSource]},(D6=D6||{}).consHWshower=D6.object(D6.ConsBase),D6.consHWshower.init=function(){this.consName="consHWshower",this.consCode="HW",this.title="shower",this.orgCopyNum=0,this.groupID="1",this.color="#ffb700",this.countCall="",this.sumConsName="consHWsum",this.sumCons2Name="",this.inputGuide="how to use shower"},D6.consHWshower.init(),D6.consHWshower.calc=function(){this.copy(this.sumCons),this.multiply(this.sumCons.consHWshowerRate)},D6.consHWshower.calcMeasure=function(){1!=this.sumCons.savingShower&&this.measures.mHWshowerHead.calcReduceRate(this.sumCons.reduceRateShowerHead),5<=this.sumCons.showerMinutes/this.sumCons.person&&!this.isSelected("mHWshowerTime30")&&this.measures.mHWshowerTime.calcReduceRate(this.sumCons.reduceRateShowerTime),this.measures.mHWshowerTime30.calcReduceRate(.3)},(D6=D6||{}).consHWtub=D6.object(D6.ConsBase),D6.consHWtub.init=function(){this.autoKeepRate=.5,this.consName="consHWtub",this.consCode="HW",this.title="Bathtub",this.orgCopyNum=0,this.groupID="1",this.color="#ffb700",this.countCall="",this.sumConsName="consHWsum",this.sumCons2Name="",this.inputGuide="how to use hot water in bath tub"},D6.consHWtub.init(),D6.consHWtub.calc=function(){this.copy(this.sumCons),this.multiply(this.sumCons.consHWtubRate)},D6.consHWtub.calcMeasure=function(){this.measures.mHWinsulation.calcReduceRate(this.sumCons.reduceRateInsulation),this.measures.mHWkeep.calcReduceRate(this.sumCons.reduceRateTabKeep),5<this.sumCons.keepMethod&&this.measures.mHWstopAutoKeep.calcReduceRate(this.sumCons.reduceRateTabKeep*this.autoKeepRate),this.measures.mHWonlyShower.calcReduceRate(this.sumCons.reduceRateStopTabSummer)},(D6=D6||{}).consHWdresser=D6.object(D6.ConsBase),D6.consHWdresser.init=function(){this.consName="consHWdresser",this.consCode="HW",this.title="basin",this.orgCopyNum=0,this.groupID="1",this.color="#ffb700",this.countCall="",this.sumConsName="consHWsum",this.sumCons2Name="",this.inputGuide="How to wash hot water in the basin"},D6.consHWdresser.init(),D6.consHWdresser.calc=function(){this.copy(this.sumCons),this.multiply(this.sumCons.consHWdresserRate)},D6.consHWdresser.calcMeasure=function(){},(D6=D6||{}).consHWdishwash=D6.object(D6.ConsBase),D6.consHWdishwash.init=function(){this.reduceRateWashTank=.3,this.reduceRateWashNotSummer=.5,this.reduceRateDishWasher=.2,this.consName="consHWdishwash",this.consCode="HW",this.title="Dish Wash",this.orgCopyNum=0,this.groupID="1",this.color="#ffb700",this.countCall="",this.sumConsName="consHWsum",this.sumCons2Name="",this.inputGuide="How to use the dishwasher"},D6.consHWdishwash.init(),D6.consHWdishwash.calc=function(){this.copy(this.sumCons),this.multiply(this.sumCons.consHWdishwashRate)},D6.consHWdishwash.calcMeasure=function(){1!=this.sumCons.dishWashWater&&this.measures.mHWdishTank.calcReduceRate(this.reduceRateWashTank),1!=this.sumCons.dishWashWater&&this.measures.mHWdishWater.calcReduceRate(this.reduceRateWashNotSummer)},(D6=D6||{}).consHWtoilet=D6.object(D6.ConsBase),D6.consHWtoilet.init=function(){this.warmerElec_kWh_y=200,this.resudeRateGoodSheat=.5,this.resudeRateTemplature=.2,this.resudeRateCover=.1,this.water_m3_d=.1,this.consName="consHWtoilet",this.consCode="HW",this.title="toilet",this.orgCopyNum=0,this.groupID="1",this.color="#ffb700",this.countCall="",this.sumConsName="consHWsum",this.sumCons2Name="",this.inputGuide="How to use toilet water and heat insulation"},D6.consHWtoilet.init(),D6.consHWtoilet.precalc=function(){this.clear(),this.person=this.input("i001",3),this.keepSeason=this.input("i131",2),this.keepTemp=this.input("i132",2),this.savingToilet=this.input("i133",2),this.coverToilet=this.input("i134",1)},D6.consHWtoilet.calc=function(){this.electricity=this.warmerElec_kWh_y/12*(4-this.keepSeason)/3*(1==this.keepTemp?1.1:3==this.keepTemp?.9:1)*(1==this.savingToilet?.5:1)*(2==this.coverToilet?1.1:1),this.water=this.water_m3_d*this.person*30},D6.consHWtoilet.calcMeasure=function(){this.measures.mHWreplaceToilet5.copy(this),this.measures.mHWreplaceToilet5.water=this.water_m3_d*this.person*30/2,1==this.savingToilet&&4==this.keepSeason||this.measures.mHWreplaceToilet.calcReduceRate(this.resudeRateGoodSheat),this.isSelected("mHWreplaceToilet")||1==this.savingToilet||(1==this.keepTemp?this.measures.mHWtemplatureToilet.calcReduceRate(this.resudeRateTemplature):2==this.keepTemp&&this.measures.mHWtemplatureToilet.calcReduceRate(this.resudeRateTemplature/2)),this.isSelected("mHWreplaceToilet")||1==this.savingToilet||1==this.coverToilet||this.measures.mHWcoverTilet.calcReduceRate(this.resudeRateCover)},(D6=D6||{}).consCOsum=D6.object(D6.ConsBase),D6.consCOsum.init=function(){this.coolLoadUnit_Wood=220,this.coolLoadUnit_Steel=145,this.apf=4,this.reduceRateSunCut=.1,this.consName="consCOsum",this.consCode="CO",this.title="cooling",this.orgCopyNum=0,this.groupID="2",this.color="#0000ff",this.countCall="",this.sumConsName="consTotal",this.sumCons2Name="",this.inputGuide="how to use air cooling in the whole house"},D6.consCOsum.init(),D6.consCOsum.precalc=function(){this.clear(),this.person=this.input("i001",3),this.houseSize=this.input("i003",1==this.person?60:80+10*this.person),this.houseType=this.input("i002",1),this.coolArea=this.input("i201",.5),this.coolTime=this.input("i261",4),this.coolTemp=this.input("i263",27),this.coolMonth=this.input("i264",D6.area.seasonMonth.summer)},D6.consCOsum.calc=function(){var t;t=this.houseSize*this.coolArea,.05<this.coolArea&&(t=Math.max(t,13));var e=this.calcCoolLoad(t,this.coolTime,this.coolMonth,this.coolTemp);e*=this.coolMonth/12,this.electricity=e/this.apf/D6.Unit.calorie.electricity},D6.consCOsum.calcMeasure=function(){this.measures.mCOsunCut.calcReduceRate(this.reduceRateSunCut)},D6.consCOsum.calcCoolLoad=function(t,e,s,i){var o;return o=(27-i)/10+1,(1==this.houseType?this.coolLoadUnit_Wood:this.coolLoadUnit_Steel)*D6.area.getCoolFactor(s,e)[0]*t*e*30*o},(D6=D6||{}).consACcool=D6.object(D6.consCOsum),D6.consACcool.init=function(){this.consName="consACcool",this.consCode="",this.title="room air conditioning",this.orgCopyNum=1,this.addable="room air conditioning",this.groupID="2",this.color="#0000ff",this.countCall="th room",this.sumConsName="consCOsum",this.sumCons2Name="consAC",this.inputGuide="how to use air conditioning for each room"},D6.consACcool.init(),D6.consACcool.precalc=function(){this.clear(),this.houseSize=1,this.ac=D6.consListByName.consAC[this.subID],this.coolArea=this.input("i212"+this.subID,12),this.coolTime=this.input("i271"+this.subID,this.sumCons.coolTime),this.coolTemp=this.input("i273"+this.subID,this.sumCons.coolTemp),this.coolMonth=this.input("i274"+this.subID,this.sumCons.coolMonth)},D6.consACcool.calc=function(){var t=this.calcCoolLoad(this.coolArea,this.coolTime,this.coolTemp,this.coolMonth);t*=D6.area.seasonMonth.summer/12,this.electricity=t/this.ac.apf/D6.Unit.calorie.electricity},D6.consACcool.calc2nd=function(){if(0==this.subID){this.electricity=this.sumCons.electricity;for(var t=D6.consListByName[this.consName],e=1;e<t.length;e++)this.electricity-=t[e].electricity}},D6.consACcool.calcMeasure=function(){0<this.subID||this.electriity==this.sumCons.electricity||(this.coolTemp<28&&20<this.coolTemp?this.measures.mCOtemplature.calcReduceRate((28-this.coolTemp)/10):this.measures.mCOtemplature.calcReduceRate(0))},(D6=D6||{}).consHTsum=D6.object(D6.ConsBase),D6.consHTsum.init=function(){this.consName="consHTsum",this.consCode="HT",this.title="heating",this.orgCopyNum=0,this.groupID="2",this.color="#ff0000",this.countCall="",this.sumConsName="consTotal",this.sumCons2Name="",this.inputGuide="how to use the whole house heating",this.heatMcal,this.heatACCalcMcal,this.heatLoadUnit_Wood=225.5,this.heatLoadUnit_Steel=148.625,this.apf=3,this.apfMax=4.5,this.reduceRateInsulation=.082,this.reduceRateDouble=.124,this.reduceRateUchimado=.14,this.reduceRateLowe=.16,this.reduceRateFilterCool=.05,this.reduceRateFilter=.12,this.reduceRateDanran=.303},D6.consHTsum.init(),D6.consHTsum.precalc=function(){this.clear(),this.prefecture=this.input("i021",13),this.heatArea=D6.area.getHeatingLevel(this.prefecture),this.person=this.input("i001",3),this.houseType=this.input("i002",1),this.houseSize=D6.consShow.TO.houseSize,this.heatSpace=this.input("i201",this.heatArea<=2?.6:3==this.heatArea?.25:.2),this.heatEquip=this.input("i202",-1),this.heatTime=this.input("i204",1==this.heatArea?24:2==this.heatArea?10:(this.heatArea,6)),this.heatMonth=this.input("i206",D6.area.seasonMonth.winter),this.heatTemp=this.input("i205",21),this.priceEleSpring=this.input("i0912",-1),this.priceEleWinter=this.input("i0911",-1),this.priceGasSpring=this.input("i0922",-1),this.priceGasWinter=this.input("i0921",-1),this.consKeros=this.input("i064",-1),this.hotwaterEquipType=this.input("i101",-1),this.performanceWindow=this.input("i041",-1),this.performanceWall=this.input("i042",-1),this.reformWindow=this.input("i043",-1),this.reformfloor=this.input("i044",-1)},D6.consHTsum.calc=function(){var t=this.houseSize*this.heatSpace;.05<this.heatSpace&&(t=Math.max(t,13));var e=this.calcHeatLoad(t,this.heatTime,this.heatMonth,this.heatTemp);e*=this.heatMonth/12,this.endEnergy=e,this.heatEquip<=0&&(0<this.consKeros||1e3<D6.area.averageCostEnergy.kerosene?this.heatEquip=4:this.priceGasWinter<0||4e3<this.priceGasWinter?this.heatEquip=3:this.heatEquip=1);var s=0,i=1==this.heatEquip?this.apf:1;if((1==this.heatEquip||2==this.heatEquip)&&0<this.priceEleWinter){var o=.7*this.priceEleWinter/D6.Unit.price.electricity*this.heatMonth/12;e/i/D6.Unit.calorie.electricity>o&&(e-=s=e-o*i*D6.Unit.calorie.electricity)}1==this.heatEquip||2==this.heatEquip?this.mainSource="electricity":3==this.heatEquip?this.mainSource="gas":4==this.heatEquip?this.mainSource="kerosene":0<this.priceHotWater?this.mainSource="hotwater":this.mainSource=this.sumCons.mainSource,this.calcACkwh=e/this.apf/D6.Unit.calorie.electricity,"electricity"==this.mainSource&&2!=this.heatEquip?this[this.mainSource]=this.calcACkwh:this[this.mainSource]=e/D6.Unit.calorie[this.mainSource];var a=-1;a=Math.max(0,this.priceEleWinter-this.priceEleSpring)/D6.Unit.price.electricity,-1!=this.priceEleSpring&&-1!=this.priceEleWinter?5!=this.hotwaterEquipType&&6!=this.hotwaterEquipType&&(this.electricity=(2*this.electricity+a)/3):this.electricity=(4*this.electricity+a)/5,a=Math.max(0,this.priceGasWinter-this.priceGasSpring)/D6.Unit.price.gas;var n;-1!=this.priceGasSpring&&-1!=this.priceGasWinter?3<=this.hotwaterEquipType&&this.hotwaterEquipType<=6?this.gas=(3*this.gas+a)/4:this.gas=(2*this.gas+a)/3:this.gas=(4*this.gas+a)/5,n=Math.max(0,this.gas-a);var c=0;-1!=this.consKeros&&3!=this.hotwaterEquipType&&4!=this.hotwaterEquipType&&(a=this.consKeros/D6.Unit.price.kerosene,c=Math.max(0,this.kerosene-a),this.kerosene=a),0<s&&(D6.Unit.areaHeating<=4&&0<this.priceKeros?this.kerosene+=s*D6.Unit.calorie.electricity/D6.Unit.calorie.kerosene:this.gas+=s*D6.Unit.calorie.electricity/D6.Unit.calorie.gas),0<n&&(0<this.priceKeros?this.kerosene=Math.min(n*D6.Unit.calorie.gas/D6.Unit.calorie.kerosene,this.consKeros/D6.Unit.price.kerosene):this.electricity+=n*D6.Unit.calorie.gas/D6.Unit.calorie.electricity),0<c&&(this.electricity+=c*D6.Unit.calorie.kerosene/D6.Unit.calorie.electricity),this.calcACkwh=e/this.apf/D6.Unit.calorie.electricity,"electricity"==this.mainSource&&2!=this.heatEquip?this[this.mainSource]=this.calcACkwh:this[this.mainSource]=e/D6.Unit.calorie[this.mainSource]},D6.consHTsum.calc2nd=function(){var t,e,s,i=D6.consShow.HW,o=D6.consShow.TO,a=D6.consShow.CK;if(t=Math.max(0,o.kerosene-i.kerosene),e=Math.max(0,o.gas-i.gas-a.gas),4==this.heatEquip&&this.kerosene>t&&-1!=this.consKeros&&(this.kerosene-t>e*D6.Unit.calorie.gas/D6.Unit.calorie.kerosene?(this.electricity+=(this.kerosene-t)*D6.Unit.calorie.kerosene/D6.Unit.calorie.electricity,this.electricity=Math.min(this.electricity,D6.consShow.TO.electricity*this.heatMonth/12*.7),this.kerosene=t,this.gas=e):(this.gas+=(this.kerosene-t)*D6.Unit.calorie.kerosene/D6.Unit.calorie.gas,this.kerosene=t)),0<t)if(-1==this.consKeros){D6.consShow.TO.kerosene=i.kerosene+this.kerosene;var n=D6.area.getSeasonParamCommon();s=D6.calcMonthly(D6.consShow.TO.kerosene*D6.Unit.price.kerosene,[-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],n.kerosene,"kerosene"),D6.consShow.TO.priceKeros=s.ave,D6.consShow.TO.seasonPrice.kerosene=s.season,D6.consShow.TO.monthlyPrice.kerosene=s.monthly}else this.kerosene=t;3==this.heatEquip&&this.gas>e&&(this.electricity+=(this.gas-e)*D6.Unit.calorie.gas/D6.Unit.calorie.electricity,this.gas=e),this.electricity+=D6.consListByName.consHWtoilet[0].electricity},D6.consHTsum.calcHeatLoad=function(t,e,s,i){var o=this.heatLoadUnit_Wood;1==this.heatArea?o*=.3:this.heatArea<=2&&(o*=.6),200<=this.performanceWall?o=.2*this.heatLoadUnit_Wood:100<=this.performanceWall?o=.4*this.heatLoadUnit_Wood:50<=this.performanceWall?o=.7*this.heatLoadUnit_Wood:30<=this.performanceWall&&(o=this.heatLoadUnit_Wood),2==this.houseType&&(o*=this.heatLoadUnit_Steel/this.heatLoadUnit_Wood);var a=D6.area.getHeatFactor(s,e),n=Math.min(e,.3*(e-8)+8)/e,c=(i-20)/10+1;return o*a[1]*t*e*n*30*c},D6.consHTsum.calcHeatLoadbyPrice=function(){return 0},D6.consHTsum.calcAdjustStrategy=function(t){this.calcACkwh*=t[this.mainSource],this.endEnergy*=t[this.mainSource]},D6.consHTsum.calcMeasure=function(){this.isSelected("mHTuchimadoAll")||this.isSelected("mHTloweAll")||2==this.houseType||this.measures.mHTdoubleGlassAll.calcReduceRate(this.reduceRateDouble),this.isSelected("mHTloweAll")||this.measures.mHTuchimadoAll.calcReduceRate(this.reduceRateUchimado),2!=this.houseType&&this.measures.mHTloweAll.calcReduceRate(this.reduceRateLowe)},(D6=D6||{}).consHTcold=D6.object(D6.ConsBase),D6.consHTcold.init=function(){this.consName="consHTcold",this.consCode="",this.title="In the cold climate area",this.orgCopyNum=0,this.groupID="2",this.color="#ff0000",this.countCall="",this.sumConsName="consHTsum",this.sumCons2Name="",this.inputGuide="How to use heating in cold climate area"},D6.consHTcold.init(),D6.consHTcold.calc=function(){this.clear()},D6.consHTcold.calcMeasure=function(){},(D6=D6||{}).consACheat=D6.object(D6.consHTsum),D6.consACheat.init=function(){this.consName="consACheat",this.consCode="",this.title="room heating",this.orgCopyNum=1,this.addable="room air conditioning",this.sumConsName="consHTsum",this.sumCons2Name="consAC",this.groupID="2",this.color="#ff0000",this.countCall="th room",this.inputGuide="how to use each room heating"},D6.consACheat.init(),D6.consACheat.precalc=function(){this.clear(),this.houseSize=1,this.ac=D6.consListByName.consAC[this.subID],this.consHeat=Object.getPrototypeOf(this),this.heatSpace=this.input("i212"+this.subID,13),this.heatEquip=this.input("i231"+this.subID,this.consHeat.heatEquip),this.heatTime=this.input("i233"+this.subID,this.consHeat.heatTime),this.heatTemp=this.input("i234"+this.subID,this.consHeat.heatTemp),this.heatMonth=this.input("i235"+this.subID,this.consHeat.heatMonth),this.windowArea=this.input("i213"+this.subID,-1),this.windowPerf=this.input("i214"+this.subID,-1)},D6.consACheat.calc=function(){var t=this.calcHeatLoad(this.heatSpace,this.heatTime,this.heatMonth,this.heatTemp);t*=this.heatMonth/12,this.endEnergy=t,this.heatEquip<=0&&(this.heatEquip=this.consHeat.heatEquip),1==this.heatEquip||2==this.heatEquip?this.mainSource="electricity":3==this.heatEquip?this.mainSource="gas":4==this.heatEquip?this.mainSource="kerosene":this.mainSource=this.sumCons.mainSource,this.calcACkwh=t/this.ac.apf/D6.Unit.calorie.electricity,"electricity"==this.mainSource&&2!=this.heatEquip?this[this.mainSource]=this.calcACkwh:this[this.mainSource]=t/D6.Unit.calorie[this.mainSource]},D6.consACheat.calc2nd=function(){if(0==this.subID){this.copy(this.sumCons);for(var t=D6.consListByName[this.consName],e=1;e<t.length;e++)this.sub(t[e])}},D6.consACheat.calcMeasure=function(){1==this.heatEquip?(this.measures.mACfilter.copy(this),this.measures.mACfilter.electricity=this.electricity*(1-this.reduceRateFilter)-D6.consShow.CO.electricity*this.reduceRateFilterCool):(this.measures.mACchangeHeat.clear(),this.measures.mACchangeHeat.electricity=this.endEnergy/this.ac.nowEquip.pf2/D6.Unit.calorie.electricity,this.measures.mACfilter.copy(this),this.measures.mACfilter.electricity=this.electricity-D6.consShow.CO.electricity*this.reduceRateFilterCool),2<=this.person&&.3<this.heatSpace&&40<this.houseSize&&this.measures.mHTdanran.calcReduceRate(this.reduceRateDanran),this.sumCons.isSelected("mHTdoubleAll")||this.sumCons.isSelected("mHTuchimadoAll")||this.sumCons.isSelected("mHTloweAll")||this.sumCons.isSelected("mHTuchimado")||this.sumCons.isSelected("mHTlowe")||this.measures.mHTdouble.calcReduceRate(this.reduceRateDouble),this.sumCons.isSelected("mHTuchimadoAll")||this.sumCons.isSelected("mHTloweAll")||this.sumCons.isSelected("mHTlowe")||this.measures.mHTuchimado.calcReduceRate(this.reduceRateUchimado),this.sumCons.isSelected("mHTloweAll")||this.measures.mHTlowe.calcReduceRate(this.reduceRateLowe),this.measures.mHTwindowSheet.calcReduceRate(this.reduceRateInsulation),21<=this.heatTemp&&this.measures.mHTtemplature.calcReduceRate((this.heatTemp-20)/10),2<this.heatTime&&this.measures.mHTtime.calcReduceRate(1/(this.heatTime-1)),this.measures.mHTuchimado.calcReduceRate(.15),this.measures.mHTceiling.calcReduceRate(.1)},(D6=D6||{}).consAC=D6.object(D6.ConsBase),D6.consAC.init=function(){this.consName="consAC",this.consCode="",this.title="room air conditioning",this.orgCopyNum=1,this.groupID="2",this.color="#ff0000",this.countCall="th room",this.sumConsName="",this.sumCons2Name="",this.inputDisp="consACcool",this.inputGuide="",this.consAddSet=["consACcool","consACheat"]},D6.consAC.init(),D6.consAC.precalc=function(){this.clear(),this.acYear=this.input("i215"+this.subID,6),this.acPerf=this.input("i216"+this.subID,2),this.acFilter=this.input("i217"+this.subID,-1),this.roomSize=this.input("i212"+this.subID,12);var t=new Date;this.nowEquip=this.equip(t.getFullYear()-this.acYear,this.roomSize<16?2.8:4),this.newEquip=this.equip(t.getFullYear(),this.roomSize<16?2.8:4),this.apf=.7*this.nowEquip.pf2,this.apfMax=.7*this.newEquip.pf1,D6.debugMode&&(console.assert(6.5==this.equip(2015,2.8).pf1,"2015 2.8kW"),console.assert(7==this.equip(2030,4.5).pf1,"2030 4.5kW"),console.assert(2e5==this.equip(t.getFullYear(),4.5).pr1,"now 4.5kW price"),console.assert(6<this.equip(t.getFullYear(),4.5).pf1,"now 4.5kW price"))},D6.consAC.calc=function(){},D6.consAC.calc2nd=function(){this.acHeat=D6.consListByName.consACheat[this.subID],this.acCool=D6.consListByName.consACcool[this.subID],this.copy(this.acHeat),this.add(this.acCool)},D6.consAC.equip=function(t,e){return this.getEquipParameters(t,e,[2.8,4.5,100],{2.8:{1900:{pf1:3,pf2:2,pr1:15e4,pr2:12e4},1995:{pf1:3,pf2:2,pr1:15e4,pr2:12e4},2005:{pf1:5,pf2:3.5,pr1:15e4,pr2:12e4},2015:{pf1:6.5,pf2:5,pr1:15e4,pr2:12e4},2030:{pf1:7,pf2:6,pr1:15e4,pr2:12e4}},4.5:{1900:{pf1:3,pf2:2,pr1:2e5,pr2:16e4},1995:{pf1:3,pf2:2,pr1:2e5,pr2:16e4},2005:{pf1:4,pf2:2.5,pr1:2e5,pr2:16e4},2015:{pf1:6,pf2:4,pr1:2e5,pr2:16e4},2030:{pf1:7,pf2:6,pr1:2e5,pr2:16e4}},100:{1900:{pf1:3,pf2:2,pr1:24e4,pr2:22e4},1995:{pf1:3,pf2:2,pr1:24e4,pr2:22e4},2005:{pf1:3.5,pf2:2.5,pr1:24e4,pr2:22e4},2015:{pf1:4.5,pf2:3.5,pr1:24e4,pr2:22e4},2030:{pf1:6,pf2:5,pr1:24e4,pr2:22e4}}})},D6.consAC.calcMeasure=function(){var t;if(t=this.measures.mACreplace,!this.isSelected("mACreplaceHeat")&&(t.copy(this),1==this.acHeat.heatEquip?(t.electricity=this.electricity*this.apf/this.apfMax,t.consACheat=D6.object(D6.Energy),t.consACheat.copy(this.acHeat),t.consACheat.electricity=this.acHeat.electricity*this.apf/this.apfMax):t.electricity-=this.acCool.electricity*(1-this.apf/this.apfMax),t.consACcool=D6.object(D6.Energy),t.consACcool.copy(this.acCool),t.consACcool.electricity=this.acCool.electricity*this.apf/this.apfMax,.3<this.acHeat.heatArea&&60<this.acHeat.houseSize)){var e=Math.round(Math.max(this.acHeat.houseSize*this.acHeat.heatArea,25)/25);t.priceNew=e*t.def.price}t=this.measures.mACreplaceHeat,1==!this.acHeat.heatEquip&&(t.clear(),t.consACheat=D6.object(D6.Energy),t.consACheat.copy(this.acHeat),t.consACheat.electricity=this.acHeat.endEnergy/this.apfMax/D6.Unit.calorie.electricity,t.consACcool=D6.object(D6.Energy),t.consACcool.copy(this.acCool),t.consACcool.electricity=this.acCool.electricity*this.acHeat.apf/this.apfMax,t.electricity=t.consACheat.electricity+t.consACcool.electricity,.3<this.heatArea&&60<this.houseSize&&(t.priceNew=Math.round(Math.max(this.houseSize*this.heatArea,25)/25)*this.nowEquip.pr1))},(D6=D6||{}).consRFsum=D6.object(D6.ConsBase),D6.consRFsum.init=function(){this.consName="consRFsum",this.consCode="RF",this.title="refrigerator",this.orgCopyNum=0,this.sumConsName="consTotal",this.sumCons2Name="",this.groupID="3",this.color="#a0ffa0",this.residueCalc="no",this.inputGuide="usage of refrigerator"},D6.consRFsum.init(),D6.consRFsum.calc=function(){this.clear(),this.count=this.input("i701",1)},D6.consRFsum.calcMeasure=function(){},D6.consRFsum.equip=function(t,e){return this.getEquipParameters(t,e,[100,200,300,400,500,1100],{100:{1900:{pf1:300,pf2:400,pr1:5e4,pr2:4e4},2005:{pf1:300,pf2:400,pr1:5e4,pr2:4e4},2015:{pf1:250,pf2:350,pr1:5e4,pr2:4e4},2030:{pf1:250,pf2:350,pr1:5e4,pr2:4e4}},200:{1900:{pf1:350,pf2:450,pr1:9e4,pr2:7e4},2005:{pf1:350,pf2:450,pr1:9e4,pr2:7e4},2015:{pf1:350,pf2:450,pr1:9e4,pr2:7e4},2030:{pf1:350,pf2:450,pr1:9e4,pr2:7e4}},300:{1900:{pf1:500,pf2:750,pr1:12e4,pr2:1e5},2005:{pf1:450,pf2:550,pr1:12e4,pr2:1e5},2015:{pf1:350,pf2:450,pr1:9e4,pr2:7e4},2030:{pf1:350,pf2:450,pr1:9e4,pr2:7e4}},400:{1900:{pf1:700,pf2:950,pr1:14e4,pr2:12e4},1995:{pf1:650,pf2:900,pr1:14e4,pr2:12e4},2015:{pf1:300,pf2:550,pr1:12e4,pr2:1e5},2030:{pf1:300,pf2:400,pr1:12e4,pr2:1e5}},500:{1900:{pf1:900,pf2:1300,pr1:2e5,pr2:18e4},1995:{pf1:900,pf2:1200,pr1:2e5,pr2:18e4},2015:{pf1:300,pf2:550,pr1:16e4,pr2:14e4},2030:{pf1:300,pf2:400,pr1:16e4,pr2:14e4}},1100:{1900:{pf1:1e3,pf2:1500,pr1:22e4,pr2:2e5},1995:{pf1:900,pf2:1400,pr1:22e4,pr2:2e5},2015:{pf1:400,pf2:750,pr1:2e5,pr2:18e4},2030:{pf1:400,pf2:500,pr1:2e5,pr2:18e4}}})},(D6=D6||{}).consRF=D6.object(D6.consRFsum),D6.consRF.init=function(){this.consYear=650,this.consYearAdvanced=300,this.reduceRateWall=.1,this.reduceRateTemplature=.12,this.consName="consRF",this.consCode="",this.title="refrigerator",this.orgCopyNum=1,this.addable="refrigerator",this.groupID="3",this.color="#a0ffa0",this.countCall="th",this.sumConsName="consRFsum",this.sumCons2Name="",this.inputGuide="How to use each refrigerator"},D6.consRF.init(),D6.consRF.precalc=function(){this.clear(),this.year=this.input("i711"+this.subID,8),this.type=this.input("i712"+this.subID,1),this.size=this.input("i713"+this.subID,350),this.templature=this.input("i714"+this.subID,4),this.full=this.input("i715"+this.subID,4),this.space=this.input("i716"+this.subID,3),this.performance=this.input("i721",2);var t=new Date;this.nowEquip=this.equip(t.getFullYear()-this.year,this.size),this.newEquip=this.equip(t.getFullYear(),this.size)},D6.consRF.calc=function(){this.consYear=this.nowEquip.pf2*(2==this.type?2:1),this.consYearAdvanced=this.newEquip.pf1*(2==this.type?2:1),this.reduceRateChange=this.consYearAdvanced/this.consYear,0!=this.subID?0<this.subID&&this.input("i711"+this.subID,-1)<0&&this.input("i713"+this.subID,-1)<0||(this.electricity=this.consYear/12,this.electricity=this.electricity*(3==this.full?1.1:1==this.full?.9:1),this.electricity=this.electricity*(1==this.space?.95:2==this.space?1.05:1),this.electricity=this.electricity*(1==this.templature?1.1:3==this.templature?.95:1),this.electricity=this.electricity*(1==this.performance?.8:3==this.performance?1.2:1)):this.input("i7111",-1)<0&&this.input("i7131",-1)<0?this.electricity=this.consYear*this.count/12:this.electricity=0},D6.consRF.calcMeasure=function(){this.measures.mRFreplace.calcReduceRate(this.reduceRateChange),3!=this.templature&&this.measures.mRFtemplature.calcReduceRate(this.reduceRateTemplature),1!=this.space&&this.measures.mRFwall.calcReduceRate(this.reduceRateWall),1<this.count&&(0==this.subID?this.measures.mRFstop.calcReduceRate(1/this.count):this.measures.mRFstop.electricity=0)},(D6=D6||{}).consLIsum=D6.object(D6.ConsBase),D6.consLIsum.init=function(){this.consName="consLIsum",this.consCode="LI",this.title="light",this.orgCopyNum=0,this.groupID="6",this.color="#ffff00",this.residueCalc="sumup",this.sumConsName="consTotal",this.sumCons2Name="",this.inputGuide="how to use the whole house lighting",this.lightTime=6,this.performanceLED=140,this.performanceHF=100,this.performanceFlueciend=70,this.preformanceBulb=15,this.wattLivingBulb=300,this.wattLivingFlue=70,this.wattLivingLED=40,this.outdoorWatt=150,this.outdoorTime=.5,this.sensorWatt=2,this.reduceRateBulb=1-this.preformanceBulb/this.performanceFlueciend,this.reduceRateCeiling=1-this.performanceFlueciend/this.performanceLED,this.reduceRateLED=1-this.preformanceBulb/this.performanceLED},D6.consLIsum.init(),D6.consLIsum.precalc=function(){this.clear(),this.person=this.input("i001",3),this.lightType=this.input("i501",2),this.otherRate=this.input("i502",3),this.houseSize=D6.consShow.TO.houseSize},D6.consLIsum.calc=function(){1==this.lightType?this.sumWatt=this.wattLivingBulb:3==this.lightType?this.sumWatt=this.wattLivingLED:this.sumWatt=this.wattLivingFlue,this.electricity=this.sumWatt*this.lightTime/1e3*30,this.electricity*=Math.max(this.houseSize-20,0)/20*.2+1,this.electricity*=Math.max(this.houseSize-20,0)/20*.5*(this.otherRate/10)+1},D6.consLIsum.calc2nd=function(){var t=this.electricity;for(var e in this.clear(),this.partCons)this.add(this.partCons[e]);t>this.electricity&&(this.electricity=t)},D6.consLIsum.calcMeasure=function(){},(D6=D6||{}).consLI=D6.object(D6.consLIsum),D6.consLI.init=function(){this.consName="consLI",this.consCode="",this.title="light",this.orgCopyNum=1,this.addable="room for lighting",this.groupID="6",this.color="#ffff00",this.countCall="th room",this.sumConsName="consLIsum",this.sumCons2Name="",this.inputGuide="how to use each room lighting"},D6.consLI.init(),D6.consLI.precalc=function(){this.clear();this.rid=this.input("i511"+this.subID,0),this.mesTitlePrefix=this.rid?["","玄関","門灯","廊下","トイレ","脱衣所","風呂","居室"][this.rid]:this.mesTitlePrefix,this.type=this.input("i512"+this.subID,2),this.watt=this.input("i513"+this.subID,-1),this.num=this.input("i514"+this.subID,0),this.time=this.input("i515"+this.subID,this.lightTime)},D6.consLI.calc=function(){0<this.watt||(this.type<=2?this.watt=60:this.watt=100),this.electricity=this.watt*this.time*this.num/1e3*365/12},D6.consLI.calc2nd=function(){if(0==this.subID){this.electricity=this.sumCons.electricity;for(var t=D6.consListByName[this.consName],e=1;e<t.length;e++)this.electricity-=t[e].electricity;1==this.lightType?this.type=1:3==this.lightType?this.type=5:this.type=2,this.watt=this.sumWatt,this.num=1}},D6.consLI.calcMeasure=function(){var t=!1;(this.isSelected("mLILED")||this.isSelected("mLIceilingLED")||this.isSelected("mLIsensor"))&&(t=!0),5==this.type||6==this.type||this.watt<20||t||(1==this.type?this.measures.mLILED.calcReduceRate(this.reduceRateLED):2!=this.type&&3!=this.type||this.measures.mLILED.calcReduceRate((this.reduceRateLED-this.reduceRateBulb)/this.reduceRateLED)),3==this.type&&50<this.watt*this.num&&!t&&this.measures.mLIceilingLED.calcReduceRate(this.reduceRateCeiling),1<=this.rid&&this.rid<=3&&(this.measures.mLIsensor.electricity=365*(this.outdoorWatt*this.outdoorTime+24*this.sensorWatt)/1e3/12),2<=this.time&&this.measures.mLItime.calcReduceRate(1/(this.time-1))},(D6=D6||{}).consTVsum=D6.object(D6.ConsBase),D6.consTVsum.init=function(){this.watt=100,this.reduceRateRadio=.5,this.reduceRateBright=.2,this.consName="consTVsum",this.consCode="TV",this.title="TV",this.orgCopyNum=0,this.groupID="7",this.color="#00ff00",this.sumConsName="consTotal",this.sumCons2Name="",this.residueCalc="sumup",this.inputGuide="how to use TV totally"},D6.consTVsum.init(),D6.consTVsum.calc=function(){this.useTime=this.input("i601",8.5),this.electricity=this.watt/1e3*this.useTime*30},D6.consTVsum.calc2nd=function(){var t=this.electricity;for(var e in this.clear(),this.partCons)this.add(this.partCons[e]);t>this.electricity&&(this.electricity=t)},D6.consTVsum.equip=function(t,e){return this.getEquipParameters(t,e,[20,30,40,50,60,120],{20:{1900:{pf1:100,pf2:150,pr1:5e5,pr2:4e5},1995:{pf1:50,pf2:100,pr1:5e4,pr2:4e4},2005:{pf1:40,pf2:80,pr1:4e4,pr2:3e4},2015:{pf1:30,pf2:50,pr1:3e4,pr2:25e3},2030:{pf1:20,pf2:30,pr1:3e4,pr2:25e3}},30:{1900:{pf1:150,pf2:300,pr1:5e5,pr2:4e5},1995:{pf1:80,pf2:150,pr1:8e4,pr2:6e4},2005:{pf1:50,pf2:100,pr1:5e4,pr2:4e4},2015:{pf1:40,pf2:60,pr1:4e4,pr2:35e3},2030:{pf1:30,pf2:40,pr1:4e4,pr2:35e3}},40:{1900:{pf1:400,pf2:500,pr1:5e5,pr2:4e5},1995:{pf1:300,pf2:500,pr1:2e5,pr2:15e4},2005:{pf1:100,pf2:200,pr1:12e4,pr2:1e5},2015:{pf1:60,pf2:120,pr1:1e5,pr2:8e4},2030:{pf1:40,pf2:80,pr1:8e4,pr2:7e4}},50:{1900:{pf1:500,pf2:700,pr1:5e5,pr2:4e5},1995:{pf1:500,pf2:700,pr1:4e5,pr2:3e5},2005:{pf1:200,pf2:400,pr1:2e5,pr2:18e4},2015:{pf1:100,pf2:200,pr1:14e4,pr2:12e4},2030:{pf1:80,pf2:160,pr1:1e5,pr2:9e4}},60:{1900:{pf1:500,pf2:700,pr1:5e5,pr2:4e5},1995:{pf1:500,pf2:700,pr1:5e5,pr2:4e5},2005:{pf1:250,pf2:500,pr1:4e5,pr2:3e5},2015:{pf1:120,pf2:200,pr1:18e4,pr2:16e4},2030:{pf1:100,pf2:180,pr1:16e4,pr2:15e4}},120:{1900:{pf1:500,pf2:700,pr1:5e5,pr2:4e5},1995:{pf1:500,pf2:700,pr1:5e5,pr2:4e5},2005:{pf1:350,pf2:500,pr1:4e5,pr2:3e5},2015:{pf1:200,pf2:400,pr1:18e4,pr2:16e4},2030:{pf1:180,pf2:250,pr1:16e4,pr2:15e4}}})},D6.consTVsum.calcMeasure=function(){this.measures.mTVradio.calcReduceRate(this.reduceRateRadio)},(D6=D6||{}).consTV=D6.object(D6.consTVsum),D6.consTV.init=function(){this.consName="consTV",this.consCode="",this.title="TV",this.orgCopyNum=1,this.addable="TV",this.groupID="7",this.color="#00ff00",this.countCall="th",this.sumConsName="consTVsum",this.sumCons2Name="",this.inputGuide="How to use each TV"},D6.consTV.init(),D6.consTV.precalc=function(){this.clear(),this.size=this.input("i631"+this.subID,32),this.year=this.input("i632"+this.subID,6),1==this.subID?this.useTime=this.input("i633"+this.subID,8.5):this.useTime=this.input("i633"+this.subID,0);var t=new Date;this.nowEquip=this.equip(t.getFullYear()-this.year,this.size),this.newEquip=this.equip(t.getFullYear(),this.size),this.nowWatt=this.nowEquip.pf2,this.newWatt=this.newEquip.pf1},D6.consTV.calc=function(){this.reduceRateReplace=1-this.newWatt/this.nowWatt,this.electricity=this.useTime*this.nowWatt/1e3*30},D6.consTV.calc2nd=function(){if(0==this.subID){this.electricity=this.sumCons.electricity;for(var t=D6.consListByName[this.consName],e=1;e<t.length;e++)this.electricity-=t[e].electricity}},D6.consTV.calcMeasure=function(){0==this.subID&&0<D6.consListByName[this.consName][1].electricity||(2<this.useTime&&this.measures.mTVtime.calcReduceRate(1/(this.useTime-1)),this.measures.mTVbright.calcReduceRate(this.reduceRateBright),this.measures.mTVreplace.calcReduceRate(this.reduceRateReplace))},(D6=D6||{}).consDRsum=D6.object(D6.ConsBase),D6.consDRsum.init=function(){this.whWash=100,this.whDry=1e3,this.reduceRateHeatPump=.65,this.res2Freq=[0,1,.5,.2,.07,0],this.consName="consDRsum",this.consCode="DR",this.title="laundry washing",this.orgCopyNum=0,this.groupID="5",this.color="#00ffff",this.sumConsName="consTotal",this.sumCons2Name="",this.inputGuide="How to use the cleaner, washing machine and clothes dryer"},D6.consDRsum.init(),D6.consDRsum.precalc=function(){this.clear(),this.dryUse=this.input("i401",0),this.person=D6.consShow.TO.person},D6.consDRsum.calc=function(){this.rateDry=this.whDry*this.res2Freq[this.dryUse]/(this.whWash+this.whDry*this.res2Freq[this.dryUse]),this.electricity=(this.whWash+this.whDry*this.res2Freq[this.dryUse])/1e3*this.person/3*30},D6.consDRsum.calcMeasure=function(){this.measures.mDRheatPump.calcReduceRate(this.rateDry*this.reduceRateHeatPump),this.measures.mDRsolar.calcReduceRate(this.rateDry)},(D6=D6||{}).consCRsum=D6.object(D6.ConsBase),D6.consCRsum.init=function(){this.performanceNow=10,this.performanceNew=25,this.performanceElec=8,this.publicRate=.6,this.walkRate=.2,this.reduceRateEcoDrive=.15,this.reduceRatePublic=.7,this.consName="consCRsum",this.consCode="CR",this.title="vehicle",this.orgCopyNum=0,this.groupID="8",this.color="#ee82ee",this.countCall="",this.sumConsName="consTotal",this.sumCons2Name="",this.inputGuide="How to use cars, automobile"},D6.consCRsum.init(),D6.consCRsum.precalc=function(){this.clear(),this.priceCar=D6.consShow.TO.priceCar,this.carNum=this.input("i901",-1),0==this.carNum&&D6.consShow.TO.noPriceData.car?(this.car=0,D6.consShow.TO.priceCar=0):this.car=this.priceCar/D6.Unit.price.car},D6.consCRsum.calc=function(){},D6.consCRsum.calcMeasure=function(){this.measures.mCRecoDrive.calcReduceRate(this.reduceRateEcoDrive)},(D6=D6||{}).consCR=D6.object(D6.consCRsum),D6.consCR.init=function(){this.consName="consCR",this.consCode="",this.title="vehicle",this.orgCopyNum=1,this.groupID="8",this.color="#ee82ee",this.countCall="th car",this.addable="vehicle",this.sumConsName="",this.sumCons2Name="consCRsum",this.inputGuide="the performance and use of each car"},D6.consCR.init(),D6.consCR.precalc=function(){this.clear(),this.carType=this.input("i911"+this.subID,1),this.performance=this.input("i912"+this.subID,12),this.user=this.input("i913"+this.subID,this.subID+this.countCall),this.ecoTier=this.input("i914"+this.subID,3)},D6.consCR.calc=function(){},D6.consCR.calc2nd=function(){for(var t=0,e=D6.consListByName.consCR.length,s=D6.consListByName.consCRtrip.length,i=1;i<s;i++)t+=D6.consListByName.consCRtrip[i].car;0==t?0==this.subID?this.car=this.sumCons2.car:(this.car*=Math.pow(.5,this.subID),this.subID==e-1&&(this.car*=2)):this.car*=this.sumCons2.car/t},D6.consCR.calcMeasure=function(){this.isSelected("mCRreplaceElec")||this.measures.mCRreplace.calcReduceRate((this.performanceNew-this.performanceNow)/this.performanceNew),this.isSelected("mCRreplace")||(this.measures.mCRreplaceElec.clear(),this.measures.mCRreplaceElec.electricity=this.performanceNow*this.car/this.performanceElec)},(D6=D6||{}).consCRtrip=D6.object(D6.consCRsum),D6.consCRtrip.init=function(){this.consName="consCRtrip",this.consCode="",this.title="movement",this.orgCopyNum=1,this.groupID="8",this.color="#ee82ee",this.countCall="th places",this.addable="destination",this.sumConsName="consCRsum",this.sumCons2Name="",this.inputGuide="how to use cars by destinations"},D6.consCRtrip.init(),D6.consCRtrip.precalc=function(){this.clear(),this.mesTitlePrefix=this.input("i921"+this.subID,this.mesTitlePrefix),this.frequency=this.input("i922"+this.subID,250),this.km=this.input("i923"+this.subID,0),this.carID=this.input("i924"+this.subID,1),this.consCar=D6.consListByName.consCR[this.carID]},D6.consCRtrip.calc=function(){this.performance=this.consCar.performance,this.car=2*this.km*this.frequency/12/this.performance,this.consCar.car+=this.car},D6.consCRtrip.calc2nd=function(){if(0==this.subID){this.car=this.sumCons.car;for(var t=D6.consListByName[this.consName],e=1;e<t.length;e++)this.car-=t[e].car}},D6.consCRtrip.calcMeasure=function(){this.km<3&&this.measures.mCRwalk.calcReduceRate(this.walkRate),this.measures.mCR20percent.calcReduceRate(.2),this.measures.mCRtrain.calcReduceRate(this.reduceRatePublic*this.publicRate)},(D6=D6||{}).consCKsum=D6.object(D6.ConsBase),D6.consCKsum.init=function(){this.consName="consCKsum",this.consCode="CK",this.title="Cooking",this.orgCopyNum=0,this.groupID="4",this.color="#ffe4b5",this.countCall="",this.sumConsName="consTotal",this.sumCons2Name="",this.residueCalc="no",this.inputGuide="How to use cooking equipments"},D6.consCKsum.init(),D6.consCKsum.calc=function(){this.clear()},D6.consCKsum.calcMeasure=function(){},(D6=D6||{}).consCKpot=D6.object(D6.ConsBase),D6.consCKpot.init=function(){this.wattOrdinal=30,this.consName="consCKpot",this.consCode="CK",this.title="heat holding pot",this.orgCopyNum=0,this.groupID="4",this.color="#ffe4b5",this.countCall="",this.sumConsName="consCKsum",this.sumCons2Name="",this.inputGuide="How to use heat holding pot"},D6.consCKpot.init(),D6.consCKpot.precalc=function(){this.clear(),this.time=this.input("i821",6),this.ecoType=this.input("i822",3)},D6.consCKpot.calc=function(){this.electricity=this.wattOrdinal*this.time*30/1e3*(1==this.ecoType?.5:1)},D6.consCKpot.calcMeasure=function(){},(D6=D6||{}).consCKrice=D6.object(D6.ConsBase),D6.consCKrice.init=function(){this.wattOrdinal=30,this.consName="consCKrice",this.consCode="CK",this.title="rice cooker",this.orgCopyNum=0,this.groupID="4",this.color="#ffe4b5",this.countCall="",this.sumConsName="consCKsum",this.sumCons2Name="",this.inputGuide="how to use rice cooker"},D6.consCKrice.init(),D6.consCKrice.precalc=function(){this.clear(),this.person=this.input("i001",3),this.frequency=this.input("i802",5),this.time=this.input("i820",6)},D6.consCKrice.calc=function(){this.electricity=this.wattOrdinal*this.time*30/1e3},D6.consCKrice.calcMeasure=function(){},(D6=D6||{}).consCKcook=D6.object(D6.ConsBase),D6.consCKcook.init=function(){this.consEnergyStat=84e4,this.efficentEL=2,this.consName="consCKcook",this.consCode="CK",this.title="Cooking",this.orgCopyNum=0,this.groupID="4",this.color="#ffe4b5",this.sumConsName="consCKsum",this.sumCons2Name="",this.inputGuide="How to use cooking to focus on the stove"},D6.consCKcook.init(),D6.consCKcook.precalc=function(){this.clear(),this.equipHW=this.input("i101",2),this.equipCK=this.input("i801",-1),this.person=this.input("i001",3)},D6.consCKcook.calc=function(){this.priceGas=D6.consShow.TO.priceGas,this.consEnergy=this.consEnergyStat*this.person/3,-1==this.equipCK&&(5==this.equipHW||6==this.equipHW||0==this.priceGas?this.equipCK=2:this.equipCK=1),2==this.equipCK?this.electricity=this.consEnergy/12/this.efficentEL/D6.Unit.calorie.electricity:this.gas=this.consEnergy/12/D6.Unit.calorie.gas},D6.consCKcook.calcMeasure=function(){};